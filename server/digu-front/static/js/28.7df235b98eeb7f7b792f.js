webpackJsonp([28],{L3Fl:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=t("//Fk"),s=t.n(a),o=t("mvHQ"),n=t.n(o),i=t("bOdI"),l=t.n(i),c={name:"baseform",data:function(){var e;return e={payVisible:!1,orderId:"",timer:null,yuan:null,rechrgeForm:{money:"1000",paymentType:"2"},changeMoney:0,leaveConnectedDuration:0,weixinVisible:!1,weixinQrcodeSrc:""},l()(e,"timer",null),l()(e,"paystatus",""),e},created:function(){this.queryMemberDetail(),this.querySystemConfigValue()},methods:{handlePayed:function(){this.payVisible=!1,this.weixinVisible=!1,this.timer&&clearInterval(this.timer),this.queryMemberDetail()},addCashOrder:function(){var e=this,r={transferMoney:this.rechrgeForm.money,paymentType:this.rechrgeForm.paymentType};$.post(this.$baseUrl+"order/addCashOrder.json",n()(r)).then(function(r){if("0000"==r.resultMessageEnum)if(e.orderId=r.returnObject.orderId,2==e.rechrgeForm.paymentType){var t=e.$router.resolve({name:"pay",path:"/pay/"+e.orderId,query:{}}).href;e.payVisible=!0,window.open(t,"_blank")}else e.weixinVisible=!0,e.paystatus="支付中...",e.weixinQrcodeSrc=e.$baseUrl+"order/showQRCodeImage.html?cashOrderId="+r.returnObject.orderId,e.timer=setInterval(function(){e.queryCashOrder().then(function(r){clearInterval(e.timer),e.paystatus=1==r?"支付成功！":"支付失败！"})},1e3);else e.$message.error(r.errorInfoList[0].errorMessage)})},queryCashOrder:function(){var e=this;return new s.a(function(r,t){$.get(e.$baseUrl+"order/queryCashOrderDetail.json?cashOrderId="+e.orderId).then(function(e){"0000"==e.resultMessageEnum?"1"!=e.returnObject.orderStatus&&"2"!=e.returnObject.orderStatus?r(!0):r(!1):r(e.errorInfoList[0].errorMessage)})})},queryMemberDetail:function(){var e=this;$.get(this.$baseUrl+"member/queryMemberDetail.json").then(function(r){if("0000"==r.resultMessageEnum){var t=r.returnObject;e.changeMoney=t.changeMoney||0,e.leaveConnectedDuration=e.formatterTime(t.leaveConnectedDuration||0)}else e.$message.error(r.errorInfoList[0].errorMessage)})},querySystemConfigValue:function(){var e=this;$.get(this.$baseUrl+"common/querySystemConfigValue.json",{configGroup:1,key:"CHANGE_FEE_STANDARD"}).then(function(r){"0000"==r.resultMessageEnum?e.yuan=r.returnObject:e.$message.error(r.errorInfoList[0].errorMessage)})},formatterTime:function(e){return e?'<span class="grid-num">'+Math.floor(e/60)+"</span>分":'<span class="grid-num">0</span>分'}},watch:{weixinVisible:function(e){e||(this.paystatus="",this.weixinQrcodeSrc="")}}},m={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("div",{staticClass:"w-container log-form"},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("企业付费")])]),e._v(" "),t("div",{staticClass:"recharge-from-box"},[t("span",{staticClass:"service－box"},[e._v("客服热线：0551-69101456")]),e._v(" "),t("el-form",{ref:"rechrgeForm",attrs:{model:e.rechrgeForm,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"账户余额："}},[t("span",{staticClass:"blue"},[e._v(e._s(e.changeMoney)+"元")])]),e._v(" "),t("el-form-item",{attrs:{label:"剩余通话时长：","label-width":"120px"}},[t("span",{staticClass:"blue time",domProps:{innerHTML:e._s(e.leaveConnectedDuration)}}),e._v(" "),t("el-popover",{attrs:{placement:"right",width:"200",trigger:"hover"}},[t("div",[e._v("通话"+e._s(e.yuan)+"元／分钟")]),e._v(" "),t("span",{staticClass:"blue",attrs:{slot:"reference"},slot:"reference"},[t("i",{staticClass:"el-icon-lx-redpacket"}),e._v("收费标准")])])],1),e._v(" "),t("el-form-item",{attrs:{label:"充值金额"}},[t("el-input",{staticStyle:{width:"284px"},attrs:{placeholder:"充值金额"},model:{value:e.rechrgeForm.money,callback:function(r){e.$set(e.rechrgeForm,"money",r)},expression:"rechrgeForm.money"}}),e._v(" 元\n                    ")],1),e._v(" "),t("el-form-item",[t("el-radio",{attrs:{label:"1000",border:""},model:{value:e.rechrgeForm.money,callback:function(r){e.$set(e.rechrgeForm,"money",r)},expression:"rechrgeForm.money"}},[e._v("1000")]),e._v(" "),t("el-radio",{attrs:{label:"3000",border:""},model:{value:e.rechrgeForm.money,callback:function(r){e.$set(e.rechrgeForm,"money",r)},expression:"rechrgeForm.money"}},[e._v("3000")]),e._v(" "),t("el-radio",{attrs:{label:"5000",border:""},model:{value:e.rechrgeForm.money,callback:function(r){e.$set(e.rechrgeForm,"money",r)},expression:"rechrgeForm.money"}},[e._v("5000")]),e._v(" "),t("el-radio",{attrs:{label:"10000",border:""},model:{value:e.rechrgeForm.money,callback:function(r){e.$set(e.rechrgeForm,"money",r)},expression:"rechrgeForm.money"}},[e._v("10000")]),e._v(" "),t("el-radio",{attrs:{label:"15000",border:""},model:{value:e.rechrgeForm.money,callback:function(r){e.$set(e.rechrgeForm,"money",r)},expression:"rechrgeForm.money"}},[e._v("15000")])],1),e._v(" "),t("el-form-item",{staticClass:"pay-type-box",attrs:{label:"支付方式"}},[t("el-radio",{staticClass:"alipay-radio",attrs:{label:"2",border:""},model:{value:e.rechrgeForm.paymentType,callback:function(r){e.$set(e.rechrgeForm,"paymentType",r)},expression:"rechrgeForm.paymentType"}},[e._v("支付宝支付")]),e._v(" "),t("el-radio",{staticClass:"wechat-radio",attrs:{label:"1",border:""},model:{value:e.rechrgeForm.paymentType,callback:function(r){e.$set(e.rechrgeForm,"paymentType",r)},expression:"rechrgeForm.paymentType"}},[e._v("微信支付")])],1),e._v(" "),t("el-form-item",[t("el-button",{staticClass:"pay-btn",attrs:{type:"primary"},on:{click:e.addCashOrder}},[e._v("充值")])],1)],1)],1)])],1),e._v(" "),t("el-dialog",{attrs:{title:"正在支付中",visible:e.payVisible,width:"560px"},on:{"update:visible":function(r){e.payVisible=r}}},[t("div",{staticClass:"del-dialog-cnt"},[e._v("请在支付宝中完成支付！")]),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.handlePayed}},[e._v("已完成支付")])],1)]),e._v(" "),t("el-dialog",{attrs:{title:"微信支付",visible:e.weixinVisible,width:"560px"},on:{"update:visible":function(r){e.weixinVisible=r}}},[t("div",{staticClass:"weixin-pay-box"},[t("img",{staticClass:"weixinQrcode",attrs:{src:e.weixinQrcodeSrc,alt:""}}),e._v(" "),t("p",{directives:[{name:"show",rawName:"v-show",value:e.paystatus,expression:"paystatus"}],staticClass:"paystatus"},[t("i",{staticClass:"el-icon-success"}),e._v(e._s(e.paystatus))])]),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.handlePayed}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var d=t("VU/8")(c,m,!1,function(e){t("Wczv")},"data-v-260b5cf9",null);r.default=d.exports},Wczv:function(e,r){}});