webpackJsonp([32],{LeJ3:function(e,t){},iJPU:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("mvHQ"),i=r.n(a),n={data:function(){return{ext:"ext",select_word:"",pagination:{show:!0,total:0,pageIndex:1,pageSize:20},cur_page:1,dataList:[],addNewLibary:!1,form:{name:""},rules:{name:[{required:!0,message:"请输入词库名称",trigger:"blur"}]},multipleSelection:[],currentModifyOldLibraryName:"",canaleEvent:!1,confirmEvent:!1,delVisible:!1}},created:function(){this.queryWordLibraryList()},methods:{search:function(){if(this.cur_page=1,""==this.select_word)return this.$message.error("请输入词库名"),!1;this.queryWordLibraryList()},creatLibary:function(e){var t=this,r=!0;if(this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),r=!1,!1}),r){this.addNewLibary=!1;var a={libraryName:this.form.name};$.post(this.$baseUrl+"sensitive/addWordLibrary.json",i()(a)).then(function(e){"0000"==e.resultMessageEnum?(t.$message.success("发布成功"),t.cur_page=1,t.queryWordLibraryList()):t.$message.error(e.errorInfoList[0].errorMessage)})}},handleCurrentChange:function(){},handleEditor:function(e){var t="/sensitive/"+e.id+"/"+encodeURI(e.libraryName);this.$router.push(t)},queryWordLibraryList:function(){var e=this,t={};t.currentPage=this.cur_page-1,t.pageSize=this.pagination.pageSize,""!=this.select_word&&(t.libraryName=this.select_word),$.post(this.$baseUrl+"sensitive/queryWordLibraryList.json",i()(t)).then(function(t){"0000"==t.resultMessageEnum?(e.dataList=t.returnObject.recordList,e.pagination.total=t.returnObject.totalNumber):e.$message.error(t.errorInfoList[0].errorMessage)})},handleSelectionChange:function(e){this.multipleSelection=e},enterModify:function(e,t,r,a){if(this.canaleEvent||this.confirmEvent)return!1;this.resetLibrary();var i=e.id,n=i+"ext";if("el-table_1_column_2"==t.id){this.currentModifyOldLibraryName=e.libraryName;var s=document.getElementById(i);document.getElementById(n).style.display="none",s.style.display="block"}},resetLibrary:function(){for(var e in this.dataList){var t=this.dataList[e].id,r=this.dataList[e].id+"ext",a=document.getElementById(t),i=document.getElementById(r);a.style.display="none",i.style.display="block"}},cancelChangeLibraryName:function(){this.resetLibrary()},confirmChangeLibraryName:function(e){var t=this;if(""!=this.currentModifyOldLibraryName)if(this.currentModifyOldLibraryName!=e.libraryName){var r={libraryName:this.currentModifyOldLibraryName,id:e.id};$.post(this.$baseUrl+"sensitive/modifyWordLibrary.json",i()(r)).then(function(e){"0000"==e.resultMessageEnum?(t.$message.success("更新成功"),t.resetLibrary(),t.queryWordLibraryList()):t.$message.error(e.errorInfoList[0].errorMessage)})}else this.resetLibrary();else this.$message.error("词库名称不能为空")},cancelChangeLibraryNameOver:function(){this.canaleEvent=!0},cancelChangeLibraryNameOut:function(){this.canaleEvent=!1},confirmChangeLibraryNameOut:function(){this.confirmEvent=!1},confirmChangeLibraryNameOver:function(){this.confirmEvent=!0},removeWordLibrary:function(){var e=this,t=[];for(var r in this.multipleSelection)t.push(this.multipleSelection[r].id);$.post(this.$baseUrl+"sensitive/removeWordLibrary.json",i()(t)).then(function(t){"0000"==t.resultMessageEnum?(e.$message.success("删除成功"),e.queryWordLibraryList(),e.delVisible=!1):e.$message.error(t.errorInfoList[0].errorMessage)})},updateLibraryStatus:function(e,t){var r=this,a={libraryStatus:t,id:e.id};$.post(this.$baseUrl+"sensitive/modifyWordLibrary.json",i()(a)).then(function(e){"0000"==e.resultMessageEnum?(2==t?r.$message.success("发布成功"):4==t&&r.$message.success("更新成功"),r.queryWordLibraryList()):r.$message.error(e.errorInfoList[0].errorMessage)})}}},s={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"table"},[r("div",{staticClass:"content-box-top"},[r("el-input",{staticClass:"handle-input mr10",attrs:{clearable:"",placeholder:"输入敏感词库名称"},nativeOn:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.search(t):null}},model:{value:e.select_word,callback:function(t){e.select_word=t},expression:"select_word"}}),e._v(" "),r("el-button",{staticClass:"search-btn",attrs:{type:"primary",icon:"search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),r("div",{staticClass:"content-box-top-right"},[r("el-button",{attrs:{type:"primary",icon:"iconfont icon-ico_new-task"},on:{click:function(t){e.addNewLibary=!0}}},[e._v("新建")])],1)],1),e._v(" "),r("div",{staticStyle:{"padding-top":"75px"}}),e._v(" "),r("div",{staticClass:"w-container"},[r("el-card",{staticClass:"box-card repository-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[e._v("敏感词库列表")]),e._v(" "),r("div",{staticStyle:{float:"right"}},[r("el-button",{attrs:{disabled:!e.multipleSelection.length,type:"primary"},on:{click:function(t){e.delVisible=!0}}},[e._v("删除")])],1)]),e._v(" "),r("div",{staticClass:"repository-box"},[r("div",[r("el-table",{attrs:{data:e.dataList},on:{"selection-change":e.handleSelectionChange,"cell-click":e.enterModify}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),r("el-table-column",{attrs:{label:"词库名称"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return t.$index,[r("span",{attrs:{id:a.id+e.ext}},[e._v(e._s(a.libraryName))]),e._v(" "),r("span",{staticStyle:{display:"none"},attrs:{id:a.id}},[r("el-input",{staticStyle:{width:"200px"},nativeOn:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.confirmChangeLibraryName(a):null}},model:{value:e.currentModifyOldLibraryName,callback:function(t){e.currentModifyOldLibraryName=t},expression:"currentModifyOldLibraryName"}}),e._v(" "),r("span",[r("el-button",{attrs:{type:"text",size:"small"},on:{click:e.cancelChangeLibraryName},nativeOn:{mouseout:function(t){return e.cancelChangeLibraryNameOut(t)},mouseover:function(t){return e.cancelChangeLibraryNameOver(t)}}},[e._v("取消")]),e._v(" "),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.confirmChangeLibraryName(a)}},nativeOn:{mouseout:function(t){return e.confirmChangeLibraryNameOut(t)},mouseover:function(t){return e.confirmChangeLibraryNameOver(t)}}},[e._v("确定")])],1)],1)]}}])}),e._v(" "),r("el-table-column",{attrs:{sortable:"",prop:"editTime",label:"更新时间"}}),e._v(" "),r("el-table-column",{attrs:{prop:"creator",label:"操作人"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.handleEditor(t.row)}}},[e._v("编辑")]),e._v(" "),1==t.row.libraryStatus?r("span",[r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.updateLibraryStatus(t.row,2)}}},[e._v("发布")])],1):e._e(),e._v(" "),2==t.row.libraryStatus?r("span",[r("el-button",{attrs:{type:"text",disabled:""}},[e._v("发布")])],1):e._e(),e._v(" "),3==t.row.libraryStatus?r("span",[r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.updateLibraryStatus(t.row,4)}}},[e._v("更新")])],1):e._e(),e._v(" "),4==t.row.libraryStatus?r("span",[r("el-button",{attrs:{type:"text",disabled:""}},[e._v("更新")])],1):e._e()]}}])})],1)],1)]),e._v(" "),r("div",{staticClass:"pagination"},[r("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next,jumper",total:e.pagination.total,"page-size":e.pagination.pageSize},on:{"current-change":e.handleCurrentChange}})],1)]),e._v(" "),r("el-dialog",{attrs:{title:"新增敏感词库",visible:e.addNewLibary,width:"30%"},on:{"update:visible":function(t){e.addNewLibary=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"110px",rules:e.rules}},[r("el-form-item",{attrs:{label:"敏感词库名称",prop:"name"}},[r("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addNewLibary=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.creatLibary("form")}}},[e._v("确 定")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"删除敏感词库",visible:e.delVisible,width:"30%"},on:{"update:visible":function(t){e.delVisible=t}}},[r("span",[e._v("您确定已选中的敏感词库吗？如果删除该词库，该词库下所有敏感词均被删除且无法恢复")]),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.delVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.removeWordLibrary}},[e._v("确 定")])],1)])],1)])},staticRenderFns:[]};var o=r("VU/8")(n,s,!1,function(e){r("LeJ3")},"data-v-15d446a0",null);t.default=o.exports}});