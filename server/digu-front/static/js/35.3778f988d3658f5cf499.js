webpackJsonp([35],{"0vXq":function(e,r){},gKIM:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=t("mvHQ"),o=t.n(s),i=t("VI/i"),a=t.n(i),n={data:function(){return{passwordType:"password",passwordClass:"",code_text:"获取验证码",rTime:60,disabled:!1,banners:[{src:"common-static/img/img1.png"},{src:"common-static/img/img2.png"},{src:"common-static/img/img3.png"}],registereForm:{phone:"",password:"",code:""},errors:{phone:"",code:"",errorMsg:!1},rules:{phone:[{required:!0,message:"手机号不能为空！",trigger:"blur"},{validator:function(e,r,t){0==/^1[345678]\d{9}$/.test(r)?t(new Error("请输入11位手机号！")):t()},trigger:"change"}],code:[{required:!0,message:"请输入验证码！",trigger:"blur"},{min:4,max:4,message:"请输入正确的验证码！",trigger:"change"}],password:[{required:!0,message:"密码不能为空！",trigger:"blur"},{validator:function(e,r,t){0==/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,20}$/.test(r)?t(new Error("请输入8-20位字母数字结合密码！")):t()},trigger:"change"}]}}},mounted:function(){this.autoSize(),window.onresize=this.autoSize},methods:{autoSize:function(){var e=document.documentElement.clientHeight,r=e<600?"600":e,t=780*r/1024;$(".login-wrap,.login-left,.login-right").css("height",r),$(".login-left").css("width",t),$(".login-right").css("marginLeft",t)},showPassword:function(e){"text"===this.passwordType?(this.passwordType="password",this.passwordClass=""):(this.passwordType="text",this.passwordClass="active")},countdown:function(){var e=this,r=setInterval(function(){e.rTime>0?(e.disabled=!0,e.code_text=e.rTime--+"s"):(e.disabled=!1,e.rTime=60,e.code_text="重新发送",clearInterval(r))},1e3)},sendSmsCode:function(){var e=this;if(!this.registereForm.phone)return this.errors.phone="手机号不能为空！",!1;if(0==/^1[345678]\d{9}$/.test(this.registereForm.phone))return this.errors.phone="请输入11位手机号！",!1;var r={mobileNumber:this.registereForm.phone};$.post(this.$baseUrl+"common/sendSmsCode.json?mobileNumber="+this.registereForm.phone,r).then(function(r){"0000"==r.resultMessageEnum?e.countdown():"000112"==r.resultMessageEnum?e.errors.errorMsg=!0:e.$message.error(r.errorInfoList[0].errorMessage)})},submitForm:function(e){var r=this;this.$nextTick(function(){r.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;r.submitAjax()})})},submitAjax:function(){var e=this,r=a.a.createHash("md5");r.update(this.registereForm.password);var t={accountPassword:r.digest("hex"),contactMobile:this.registereForm.phone,smsCode:this.registereForm.code};$.post(this.$baseUrl+"member/register.json",o()(t)).then(function(r){var t=r.resultMessageEnum;"0000"==t?(localStorage.setItem("ms_username",e.registereForm.phone),localStorage.removeItem("ms_pass"),e.queryMemberDetail()):"000309"==t?e.errors.code="验证码已失效！":"000307"==t?e.errors.code="验证码错误！":e.$message.error(r.errorInfoList[0].errorMessage)})},queryMemberDetail:function(){var e=this;$.get(this.$baseUrl+"member/queryMemberDetail.json").then(function(r){if("0000"==r.resultMessageEnum){var t=r.returnObject;localStorage.setItem("USER_ROLE",t.role),localStorage.setItem("USER_INFO",o()(t))}else e.$message.error(r.errorInfoList[0].errorMessage);e.$router.push("/")}).fail(function(r){e.$router.push("/")})}}},l={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"login-wrap log-form"},[t("div",{staticClass:"login-left"},[[t("el-carousel",{attrs:{height:"100%"}},e._l(e.banners,function(e,r){return t("el-carousel-item",{key:r},[t("img",{staticClass:"banner",attrs:{src:e.src,alt:""}})])}),1),e._v(" "),e._m(0)]],2),e._v(" "),t("div",{staticClass:"login-right"},[t("div",{staticClass:"login-right-body",staticStyle:{"margin-top":"-250px"}},[t("h3",{staticClass:"login-top-text"},[e._v("Sign in")]),e._v(" "),e._m(1),e._v(" "),t("el-form",{ref:"registereForm",staticClass:"ms-content",attrs:{model:e.registereForm,rules:e.rules,"label-width":"0px"}},[e.errors.errorMsg?t("div",{staticClass:"login_error el-form-item__error"},[e._v("该手机号已注册，"),t("a",{attrs:{href:"#/login"}},[e._v("点击登录")]),e._v("。")]):e._e(),e._v(" "),t("el-form-item",{attrs:{prop:"phone",error:e.errors.phone}},[t("el-input",{attrs:{placeholder:"11位手机号"},model:{value:e.registereForm.phone,callback:function(r){e.$set(e.registereForm,"phone",r)},expression:"registereForm.phone"}},[t("i",{staticClass:"w_ico_phone",attrs:{slot:"prefix"},slot:"prefix"})])],1),e._v(" "),t("el-form-item",{attrs:{prop:"code",error:e.errors.code}},[t("el-input",{attrs:{placeholder:"4位验证码"},model:{value:e.registereForm.code,callback:function(r){e.$set(e.registereForm,"code",r)},expression:"registereForm.code"}},[t("i",{staticClass:"w_ico_id-verified",attrs:{slot:"prefix"},slot:"prefix"})]),e._v(" "),t("el-button",{staticClass:"send-code-btn",staticStyle:{width:"100px"},attrs:{type:"primary",disabled:e.disabled},on:{click:e.sendSmsCode}},[e._v(e._s(e.code_text))])],1),e._v(" "),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{placeholder:"输入8-20位字母数字结合密码",type:e.passwordType,"auto-complete":"new-password"},nativeOn:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.submitForm("registereForm")}},model:{value:e.registereForm.password,callback:function(r){e.$set(e.registereForm,"password",r)},expression:"registereForm.password"}},[t("i",{staticClass:"w_ico_password",attrs:{slot:"prefix"},slot:"prefix"}),e._v(" "),t("i",{staticClass:"iconfont icon-ico_invisible el-input__icon",class:e.passwordClass,attrs:{slot:"suffix"},on:{click:function(r){return e.showPassword("password")}},slot:"suffix"})])],1),e._v(" "),t("div",{staticClass:"login-btn"},[t("el-form-item",[t("div",{staticClass:"login-btn-left"},[t("a",{attrs:{href:"#/login"}},[e._v("已有账号？登录")])]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.submitForm("registereForm")}}},[e._v("注册")])],1)],1)],1)],1),e._v(" "),t("div",{staticClass:"reserved"},[e._v("\n            © 2018 Unisound.com. All rights reserved \n        ")])])])},staticRenderFns:[function(){var e=this.$createElement,r=this._self._c||e;return r("div",{staticClass:"logo-text"},[r("span",{staticClass:"a"},[this._v("Welcome !")]),this._v(" "),r("span",{staticClass:"b"},[r("img",{attrs:{alt:""}})])])},function(){var e=this.$createElement,r=this._self._c||e;return r("div",{staticClass:"login-top-logo"},[r("img",{attrs:{alt:""}})])}]};var c=t("VU/8")(n,l,!1,function(e){t("0vXq")},"data-v-095b4570",null);r.default=c.exports}});