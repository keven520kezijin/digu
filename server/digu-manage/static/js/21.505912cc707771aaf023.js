webpackJsonp([21],{ivPe:function(e,t){},"v/Jg":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("mvHQ"),o=n.n(s),r=n("DHmE"),a=n("nasK"),i=n("fMZB"),l={data:function(){return{matchButtonDisabled:!1,tableSoundData:[],soundMatchVisible:!1,moveKnoledgeVisible:!1,delItemsVisible:!1,deleId:"",addItemsVisible:!1,multipleSelection:[],knowledgeData:[],videoVisible:!1,tableHeight:200,viewSource:"",viewPlaying:!1,searchForm:{answer:"",memberIds:"",allManager:""},managerList:[],listOfPageData:[],groupId:"",creatFAQVisible:!1,activeName:"first",creatFAQVForm:{questionContent:"",questionContentOther:[{name:"相似问题",value:""}],creatFAQOptions:[],answerContent:[{name:"回答",value:"",soundPath:"",soundDuration:"",soundSize:""}]},creatFAQVRules:{questionContent:[{required:!0,message:"请输入主问题",trigger:"blur"}]},currentIndex:0,atchKnow:{excelPathTip:"",errorMessage:"",excelPath:"",filePath:"",filePathNew:"",excelPathTipNew:"",excelPathNew:""},atchKnowRules:{filePath:[{required:!0,message:"请上传知识问答Excel数据！",trigger:"change"}]},correctArry:[],repositoryMenu:[],visibleSound:!1,pageFrom:"",pagination:{show:!0,total:0,pageIndex:1,pageSize:10},cur_page:1,industryList:[],industryOptions:[],selectIndustryId:"",changGroupOptions:[],matchSoundList:[],matchAllKnoledgeItemList:[]}},created:function(){var e=this;this.groupId=this.$route.params.id;var t=document.documentElement.clientHeight;this.tableHeight=t-290,r.a.$on("closeSound",function(t){t&&(e.visibleSound=!1)}),r.a.$on("fileName",function(t){t&&(e.creatFAQVForm.answerContent[e.currentIndex].soundPath=t.soundPath,e.creatFAQVForm.answerContent[e.currentIndex].soundDuration=t.soundDuration,e.creatFAQVForm.answerContent[e.currentIndex].soundSize=t.soundSize,e.creatFAQVForm.answerContent[e.currentIndex].value=t.soundContent)}),this.queryKnowledgeItemList(),this.getAllManager(),this.queryAllIndustryList()},components:{wVideo:a.a,wSound:i.a},methods:{matchSound:function(){var e=this;this.soundMatchVisible=!0;var t={groupId:this.groupId,searchType:2,currentPage:0,pageSize:5e3},n=[],s=[];$.post(this.$baseUrl+"services/knowledge/queryKnowledgeItemList.json",o()(t)).then(function(t){var r,a;"0000"==t.resultMessageEnum?function(){var i=t.returnObject.recordList;if(e.matchAllKnoledgeItemList=i,""!=i&&i.length>0){for(r in i){var l=void 0;try{l=JSON.parse(i[r].answerContent)}catch(e){l=item.answerContent}"[object Array]"==Object.prototype.toString.call(l)&&l.length&&l.forEach(function(e,t){(""!=e.text&&"undefined"!=e.text&&!e.hasOwnProperty("soundPath")||""==e.soundPath)&&(n.push(e.text),s.push({ansewrText:e.text,knoledgeItemId:i[r].id}))})}a=[],$.post(e.$baseUrl+"services/sound/querySoundConfigItemListBySoundContent.json",o()(n)).then(function(n){"0000"==n.resultMessageEnum?(n.returnObject.forEach(function(e,t){s.forEach(function(t,n){t.ansewrText==e.soundContent&&(e.ansewrText=t.ansewrText,e.knoledgeItemId=t.knoledgeItemId,a.push(e))})}),e.tableSoundData=a):e.$message.error(t.errorInfoList[0].errorMessage)})}}():e.$message.error(t.errorInfoList[0].errorMessage)})},handleMatchSelectionChange:function(e){var t=this,n=[];e.forEach(function(e){n.indexOf(e.knoledgeItemId+e.ansewrText)<0?n.push(e.knoledgeItemId+e.ansewrText):t.$message.error("注意,同一回答选择了多条音频,默认取最后一条")}),this.matchSoundList=e},matchSoundConfirm:function(){var e=this;this.matchButtonDisabled=!0;var t=[];this.matchSoundList.forEach(function(n){e.matchAllKnoledgeItemList.forEach(function(s,r){if(n.knoledgeItemId==s.id){var a=void 0;try{a=JSON.parse(s.answerContent)}catch(e){a=s.answerContent}"[object Array]"==Object.prototype.toString.call(a)&&a.length&&(a.forEach(function(e,t){e.text==n.ansewrText&&(e.soundPath=n.soundPath,e.soundDuration=n.soundDuration,e.soundSize=n.soundSize,a[t]=e)}),e.matchAllKnoledgeItemList[r].answerContent=o()(a),t.indexOf(s.id)<0&&t.push(s.id))}})});var n=0,s=t.length;for(var r in t)this.matchAllKnoledgeItemList.forEach(function(a,i){if(t[r]==a.id){var l={};l.id=a.id,l.answerContent=a.answerContent,$.post(e.$baseUrl+"services/knowledge/modifyKnowledgeItem.json",o()(l)).then(function(t){"0000"==t.resultMessageEnum?(1,0==(s-=1)&&(e.$message.success("匹配成功"),e.soundMatchVisible=!1,e.matchButtonDisabled=!1,e.queryKnowledgeItemList())):(n+=1,s-=1,e.$message.error("匹配失败"+n+"条"),e.soundMatchVisible=!1,e.matchButtonDisabled=!1,e.queryKnowledgeItemList())})}})},tableRowClassName:function(e){var t=e.row;e.rowIndex;if(t.isEdit&&1*t.isEdit>0)return"row-not-edit"},onHandleReset:function(){this.searchForm.memberIds=[],this.searchForm.allManager=!1,this.searchForm.answer=""},onSearch:function(){this.cur_page=1,this.pagination.total=0,this.queryKnowledgeItemList()},sortChange:function(e){console.log("sortChange",e)},handleSelectionChange:function(e){console.log("handleSelectionChange",e),this.multipleSelection=e},handleUseAudio:function(){console.log("使用音频库"),this.pageFrom="knowledgeConfig",this.visibleSound=!0},downloadExcelTemplate:function(){window.location.href=this.$baseUrl+"services/common/downloadExcelTemplate.html?excelTemplateType=2"},handleAddItems:function(e){var t=this;"first"==this.activeName?this.$refs.creatFAQVForm.validate(function(e){if(!e)return console.log("error submit!!"),!1;t.addKnowledgeItem()}):this.saveBatchKnowledgeItem("atchKnow")},handleCreatFAQV:function(){this.$router.push("/repository/config/"+this.$route.params.id+"/add")},addAnswer:function(){var e={name:"回答",value:"",soundPath:"",soundDuration:"",soundSize:""};this.creatFAQVForm.answerContent.push(e),this.tabAnswer(e,this.currentIndex+1)},tabAnswer:function(e,t){this.currentIndex=t},addKnowledgeItem:function(){var e=this,t=[];this.creatFAQVForm.questionContentOther.forEach(function(e){t.push(e.value)});var n=[];this.creatFAQVForm.answerContent.forEach(function(e){n.push({text:e.value,soundPath:e.soundPath,soundDuration:e.soundDuration,soundSize:e.soundSize})});var s={questionContent:this.creatFAQVForm.questionContent,groupId:this.groupId,questionContentOther:o()(t),answerContent:o()(n)};$.post(this.$baseUrl+"services/knowledge/addKnowledgeItem.json",o()(s)).then(function(t){"0000"==t.resultMessageEnum?(e.creatFAQVisible=!1,e.queryKnowledgeItemList()):e.$message.error(t.errorInfoList[0].errorMessage)})},addQuestion:function(){var e={name:"",value:""};this.creatFAQVForm.questionContentOther.length<2?this.creatFAQVForm.questionContentOther.push(e):this.creatFAQVForm.questionContentOther.splice(1,0,e)},removeQuestion:function(e){var t=this.creatFAQVForm.questionContentOther.indexOf(e);-1!==t&&this.creatFAQVForm.questionContentOther.splice(t,1)},handleVideoAnswer:function(){var e=this;this.videoVisible=!0,this.$nextTick(function(){e.viewSource=e.creatFAQVForm.answerContent[e.currentIndex].soundPath})},queryKnowledgeItemList:function(){var e=this,t={};t={groupId:this.groupId,searchType:2,currentPage:this.cur_page-1,pageSize:this.pagination.pageSize},""!=this.searchForm.answer&&(t.queryKey=this.searchForm.answer),0==this.searchForm.allManager&&this.searchForm.memberIds.length>0&&(t.editorList=this.searchForm.memberIds),this.sortList&&(t.sortList=this.sortList),$.post(this.$baseUrl+"services/knowledge/queryKnowledgeItemList.json",o()(t)).then(function(t){if("0000"==t.resultMessageEnum){var n=t.returnObject&&t.returnObject.recordList;if(n){var s=[];n.forEach(function(e,t){var n="";try{n=JSON.parse(e.answerContent)}catch(t){n=e.answerContent}"[object Array]"==Object.prototype.toString.call(n)&&n.length?n.forEach(function(t,n){var o={questionContent:0==n?e.questionContent:"",answerContent:t.text,editTime:0==n?e.editTime:"",editor:0==n?e.editor:"",editorId:e.editorId,id:e.id,soundPath:t.soundPath,soundDuration:t.soundDuration,soundSize:t.soundSize,isEdit:n};s.push(o)}):s.push(e)}),e.knowledgeData=s}e.pagination.total=t.returnObject.totalNumber}else self.$message.error(t.errorInfoList[0].errorMessage)})},handleCurrentChange:function(e){this.cur_page=e,this.queryKnowledgeItemList()},handleVideo:function(e){var t=this;this.videoVisible=!0,this.$nextTick(function(){t.viewSource=e.soundPath})},handleDelItems:function(){this.multipleSelection.length?this.delItemsVisible=!0:this.$message.error("请选择要删除的问答!")},removeKnowledgeItemList:function(e){var t=this,n=[];this.deleId?n.push(this.deleId):this.multipleSelection.forEach(function(e){n.push(e.id)}),$.post(this.$baseUrl+"services/knowledge/removeKnowledgeItemList.json",o()(n)).then(function(e){"0000"==e.resultMessageEnum?(t.$message.success("已删除"+t.multipleSelection.length+"个问答对！"),t.delItemsVisible=!1,t.multipleSelection=[],t.deleId="",t.queryKnowledgeItemList()):self.$message.error(e.errorInfoList[0].errorMessage)})},uploadAnnexFile:function(e){var t=this,n=new FormData;n.append("sourceType",102),n.append("file",$("#"+e)[0].files[0]),$.ajax({url:this.$baseUrl+"services/common/uploadAnnexFile.json",type:"POST",cache:!1,data:n,dataType:"json",headers:{"Content-Type":"multipart/form-data"},processData:!1,contentType:!1,async:!1}).done(function(e){"0000"==e.resultMessageEnum?(t.upload_img_index>-1?(t.correctArry[t.upload_img_index].excelPathTip=t.correctArry[t.upload_img_index].filePath,t.correctArry[t.upload_img_index].excelPath=e.returnObject):(t.atchKnow.excelPathTip=t.atchKnow.filePath,t.atchKnow.excelPath=e.returnObject),t.checkAnnexFile()):t.$message.error("上传失败！")}).fail(function(e){})},checkAnnexFile:function(){var e=this,t={excelTemplateType:2};this.upload_img_index>-1?t.filePath=this.correctArry[this.upload_img_index].excelPath:t.filePath=this.atchKnow.excelPath,$.post(this.$baseUrl+"services/common/checkAnnexFile.json",o()(t)).then(function(t){if("0000"==t.resultMessageEnum){var n={};if(t.returnObject.correctFlag)n={nextUpload:!1,correctFilePath:t.returnObject.correctFilePath};else{var s=t.returnObject.rowNumber-t.returnObject.exceptionRowNumber+"条上传成功，剩余"+t.returnObject.exceptionRowNumber+"条上传失败！";e.correctArry.length>0?e.correctArry[e.upload_img_index].errorMessage=s:e.atchKnow.errorMessage=s;var o=(~~(1e5*Math.random())).toString();n={nextUpload:!0,correctFilePath:t.returnObject.correctFilePath,errorFilePath:e.$baseUrl+"file/downloadFile.html?filePath="+t.returnObject.errorFilePath,id:"file_"+o}}e.correctArry.push(n),e.upload_img_index++}else e.$message.error(t.errorInfoList[0].errorMessage)})},saveBatchKnowledgeItem:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var n={id:t.groupId};if(t.correctArry.length){var s=[];t.correctArry.forEach(function(e){e.correctFilePath&&s.push(e.correctFilePath)}),n.correctFilePathList=s}else n.filePath=t.atchKnow.excelPath;$.post(t.$baseUrl+"services/knowledge/saveBatchKnowledgeItem.json",o()(n)).then(function(e){"0000"==e.resultMessageEnum?(t.addItemsVisible=!1,t.queryKnowledgeItemList()):t.$message.error(e.errorInfoList[0].errorMessage)})})},getAllManager:function(){var e=this;$.get(this.$baseUrl+"services/manager/getManagerList.json").then(function(t){"0000"==t.resultMessageEnum&&t.returnObject&&t.returnObject.length&&(e.managerList=t.returnObject,console.log(e.managerList))})},publishKnowledgeGroup:function(e){var t=this;$.post(this.$baseUrl+"services/knowledge/publishKnowledgeGroup.json?groupId="+this.groupId).then(function(e){"0000"==e.resultMessageEnum?(t.publishStatus=!1,t.$message.success("发布成功")):t.$message.error(e.errorInfoList[0].errorMessage)})},handleEdit:function(e){this.$router.push("/repository/edit/"+e)},handleDelete:function(e,t){this.delItemsVisible=!0,this.deleId=t.id},queryAllIndustryList:function(){var e=this;$.get(this.$baseUrl+"services/intention/queryAllIndustryList.json").then(function(t){if("0000"==t.resultMessageEnum)if(t.returnObject&&t.returnObject.length){e.industryList=t.returnObject,console.log(e.industryList);var n=[];for(var s in e.industryList){var o={};o.label=e.industryList[s].industryName,o.value=e.industryList[s].id,o.children=[],n.push(o),e.industryOptions=n}console.log(n)}else self.$message.error(t.errorInfoList[0].errorMessage)})},handleItemChange:function(e){this.selectIndustryId=e[0],this.queryKnowledgeGroupListOfPage()},queryKnowledgeGroupListOfPage:function(){var e=this,t={currentPage:0,pageSize:1e3,templateType:1};t.industryType=this.selectIndustryId,$.post(this.$baseUrl+"services/knowledge/queryKnowledgeGroupListOfPage.json?",o()(t)).then(function(t){if("0000"==t.resultMessageEnum){var n=t.returnObject.recordList,s=[];for(var o in n){var r={};r.label=n[o].groupName,r.value=n[o].id,s.push(r)}for(var o in e.industryOptions)e.industryOptions[o].value==e.selectIndustryId&&(e.industryOptions[o].children=s)}else e.$message.error(t.errorInfoList[0].errorMessage)})},changGroup:function(){var e=this,t=[];this.multipleSelection.forEach(function(e){t.push(e.id)});var n={newGroupId:this.changGroupOptions[1],knowledgeItemIdList:t};$.post(this.$baseUrl+"services/knowledge/moveKnowledgeItem.json",o()(n)).then(function(t){"0000"==t.resultMessageEnum&&(e.multipleSelection=[],e.moveKnoledgeVisible=!1,e.$message.success("移动成功！"),e.queryKnowledgeItemList())})},goGengal:function(){this.$router.push("/repository/1")}},watch:{videoVisible:function(e){e||r.a.$emit("viewPlaying",!0)},queryKey:function(e){this.queryKey=e,this.queryKnowledgeItemList()}}},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container-admin"},[n("div",{staticClass:"admin-page"},[n("el-row",[n("el-col",{attrs:{span:20}},[n("el-breadcrumb",{attrs:{separator:"/"}},[n("el-breadcrumb-item",[e._v("管理中心")]),e._v(" "),n("el-breadcrumb-item",[e._v("知识库管理")]),e._v(" "),n("el-breadcrumb-item",[e._v("通用知识库")]),e._v(" "),n("el-breadcrumb-item",[e._v("配置知识库")])],1)],1),e._v(" "),n("el-col",{attrs:{span:4}},[n("i",{staticStyle:{"padding-right":"10px",float:"right","padding-bottom":"10px"}},[n("el-button",{on:{click:e.goGengal}},[e._v("返回")])],1)])],1)],1),e._v(" "),n("div",{staticClass:"admin-body"},[n("el-tabs",[n("el-tab-pane",{attrs:{label:"配置知识库"}})],1),e._v(" "),n("el-row",[n("el-col",[n("el-form",{staticClass:"w-form-inline",attrs:{inline:!0}},[n("el-form-item",{attrs:{label:"关键词："}},[n("el-input",{attrs:{clearable:"",placeholder:"主问题/回答"},nativeOn:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.onSearch(t):null}},model:{value:e.searchForm.answer,callback:function(t){e.$set(e.searchForm,"answer",t)},expression:"searchForm.answer"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"操作人11："}},[n("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.searchForm.memberIds,callback:function(t){e.$set(e.searchForm,"memberIds",t)},expression:"searchForm.memberIds"}},e._l(e.managerList,function(e){return n("el-option",{key:e.id,attrs:{label:e.loginName,value:e.id}})}),1)],1),e._v(" "),n("el-form-item",[n("el-checkbox",{model:{value:e.searchForm.allManager,callback:function(t){e.$set(e.searchForm,"allManager",t)},expression:"searchForm.allManager"}},[e._v("全部")])],1),e._v(" "),n("el-form-item",[n("el-button",{on:{click:e.onHandleReset}},[e._v("重置")])],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[e._v("搜索")])],1)],1)],1)],1),e._v(" "),n("el-row",[n("el-col",[n("el-button",{attrs:{disabled:!e.multipleSelection.length},on:{click:e.handleDelItems}},[e._v("删除")]),e._v(" "),n("el-button",{attrs:{disabled:!e.multipleSelection.length},on:{click:function(t){e.moveKnoledgeVisible=!0}}},[e._v("移动")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.handleCreatFAQV}},[e._v("添加")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addItemsVisible=!0}}},[e._v("批量添加")]),e._v(" "),n("div",{staticStyle:{float:"right"}},[n("el-button",{attrs:{type:"primary",disabled:!e.knowledgeData.length},on:{click:e.matchSound}},[e._v("匹配音频")]),e._v(" "),n("el-button",{attrs:{type:"primary",disabled:!e.multipleSelection.length},on:{click:e.publishKnowledgeGroup}},[e._v("发布")])],1)],1)],1),e._v(" "),n("el-row",[n("el-col",[n("el-table",{attrs:{stripe:"",data:e.knowledgeData,"row-class-name":e.tableRowClassName,height:e.tableHeight},on:{"sort-change":e.sortChange,"selection-change":e.handleSelectionChange}},[n("el-table-column",{staticClass:"isEdit",attrs:{type:"selection",width:"55"}}),e._v(" "),n("el-table-column",{attrs:{prop:"questionContent",label:"主问题"}}),e._v(" "),n("el-table-column",{attrs:{prop:"answerContent",label:"回答"}}),e._v(" "),n("el-table-column",{attrs:{width:"140",sortable:"",prop:"editTime",label:"更新时间"}}),e._v(" "),n("el-table-column",{attrs:{width:"100",prop:"editor",label:"操作人11"}}),e._v(" "),n("el-table-column",{attrs:{width:"60",label:"音频"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{directives:[{name:"show",rawName:"v-show",value:t.row.soundPath,expression:"scope.row.soundPath"}],staticClass:"w_icon_play w_icon_pause",on:{click:function(n){return e.handleVideo(t.row)}}})]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.handleEdit(t.row.id)}}},[e._v("编辑")])]}}])})],1),e._v(" "),n("div",{staticClass:"pagination"},[n("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next,jumper",total:e.pagination.total,"page-size":e.pagination.pageSize},on:{"current-change":e.handleCurrentChange}})],1)],1)],1)],1),e._v(" "),n("el-dialog",{staticClass:"creat-faq-dialog",attrs:{title:"新增问答",visible:e.creatFAQVisible,"append-to-body":!0,width:"800px"},on:{"update:visible":function(t){e.creatFAQVisible=t}}},[n("div",[n("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"手动输入",name:"first"}},[n("el-form",{ref:"creatFAQVForm",staticClass:"demo-ruleForm",attrs:{model:e.creatFAQVForm,rules:e.creatFAQVRules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"主问题",prop:"questionContent"}},[n("el-input",{attrs:{placeholder:"输入主问题"},model:{value:e.creatFAQVForm.questionContent,callback:function(t){e.$set(e.creatFAQVForm,"questionContent",t)},expression:"creatFAQVForm.questionContent"}})],1),e._v(" "),e._l(e.creatFAQVForm.questionContentOther,function(t,s){return n("el-form-item",{key:"问题"+s,attrs:{label:t.name}},[n("el-input",{attrs:{placeholder:"输入相似问题"},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}}),e._v(" "),0==s?n("el-button",{attrs:{icon:"el-icon-plus"},on:{click:function(n){return n.preventDefault(),e.addQuestion(t)}}}):e._e(),e._v(" "),s>0?n("el-button",{attrs:{icon:"el-icon-minus"},on:{click:function(n){return n.preventDefault(),e.removeQuestion(t)}}}):e._e()],1)}),e._v(" "),n("el-row",[n("el-col",{staticClass:"row-left",attrs:{span:2}},e._l(e.creatFAQVForm.answerContent,function(t,s){return n("span",{key:s,class:{active:e.currentIndex==s},on:{click:function(n){return e.tabAnswer(t,s)}}},[e._v("\n                                        "+e._s("回答"+(s+1))+"\n                                    ")])}),0),e._v(" "),n("el-col",{staticClass:"row-center",attrs:{span:18}},[n("el-input",{attrs:{type:"textarea",placeholder:"输入回答内容"},model:{value:e.creatFAQVForm.answerContent[e.currentIndex].value,callback:function(t){e.$set(e.creatFAQVForm.answerContent[e.currentIndex],"value",t)},expression:"creatFAQVForm.answerContent[currentIndex].value"}}),e._v(" "),n("div",{staticClass:"answer-bottom"},[e._v("\n                                    您可以"),n("span",{on:{click:e.handleUseAudio}},[e._v("使用音频")]),e._v("（使用后将自动填充对应文本）或\n                                    "),n("span",{staticClass:"btnUpload"},[e._v("上传音频"),n("input",{staticClass:"importFile",attrs:{type:"file",multiple:"multiple"},on:{change:function(t){return e.uploadAnnexFileOfInfo()}}})]),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.creatFAQVForm.answerContent[e.currentIndex].soundPath,expression:"creatFAQVForm.answerContent[currentIndex].soundPath"}],staticClass:"play-btn"},[n("i",{staticClass:"iconfont icon-icon_play",on:{click:function(t){return e.handleVideoAnswer()}}}),e._v(" "),n("span",{on:{click:function(t){return e.handleCancelPlay()}}},[e._v("取消")])])])],1),e._v(" "),n("el-col",{attrs:{span:2}},[n("el-button",{attrs:{icon:"el-icon-plus"},on:{click:function(t){return t.preventDefault(),e.addAnswer()}}})],1)],1)],2)],1)],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.creatFAQVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.handleAddItems}},[e._v("保 存")])],1)]),e._v(" "),n("el-dialog",{staticClass:"sound-dialog",attrs:{visible:e.visibleSound,fullscreen:!0,"show-close":!1},on:{"update:visible":function(t){e.visibleSound=t}}},[n("w-sound",{attrs:{from:e.pageFrom}})],1),e._v(" "),n("el-dialog",{attrs:{title:"音频",visible:e.videoVisible,width:"600px"},on:{"update:visible":function(t){e.videoVisible=t}}},[n("w-video",{attrs:{source:e.viewSource,playing:e.viewPlaying}})],1),e._v(" "),n("el-dialog",{attrs:{title:"删除问答对",visible:e.delItemsVisible,width:"400px"},on:{"update:visible":function(t){e.delItemsVisible=t}}},[n("div",[e._v("您确定要删除选中的"+e._s(e.multipleSelection.length)+"个问答对吗？删除后将不能恢复")]),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.delItemsVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.removeKnowledgeItemList}},[e._v("确 定")])],1)]),e._v(" "),n("el-dialog",{attrs:{title:"批量添加回答对",visible:e.addItemsVisible},on:{"update:visible":function(t){e.addItemsVisible=t}}},[n("div",{staticClass:"faqUpload"},[n("el-form",{ref:"atchKnow",staticClass:"demo-ruleForm",attrs:{model:e.atchKnow,rules:e.atchKnowRules,"label-width":"100px"}},[n("div",[n("span",{staticClass:"red"},[e._v("*")]),e._v("第一步：请下载用于填写知识问答的Excel模版文件")]),e._v(" "),n("div",{staticClass:"updload-list-box"},[n("el-button",{on:{click:e.downloadExcelTemplate}},[e._v("下载模版")])],1),e._v(" "),n("div",[n("span",{staticClass:"red"},[e._v("*")]),e._v("\n                    第二步：请上传已填写完成的Excel文件（建议最多不超过1000行）\n                    "),n("el-popover",{attrs:{placement:"bottom",width:"200",trigger:"hover",content:"填写规范：仅支持Excel文件，多个相似问题或者回答用*|*隔开，可以省略分类，问题[TAB]相似问题[TAB]回答内容<分类>"}},[n("i",{staticClass:"el-icon-question",attrs:{slot:"reference"},slot:"reference"})])],1),e._v(" "),n("div",{staticClass:"updload-list-box"},[n("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.atchKnow.errorMessage,expression:"!atchKnow.errorMessage"}],staticClass:"file-btn"},[n("el-input",{staticClass:"file-btn-inner-input",attrs:{multiple:"multiple",type:"file",id:"file"},on:{change:function(t){return e.uploadAnnexFile("file")}},model:{value:e.atchKnow.filePath,callback:function(t){e.$set(e.atchKnow,"filePath",t)},expression:"atchKnow.filePath"}}),e._v("\n                        选择文件上传\n                    ")],1),e._v(" "),n("span",{staticClass:"blue"},[e._v(e._s(e.atchKnow.excelPathTip))]),e._v(" "),n("span",{staticClass:"red"},[e._v(e._s(e.atchKnow.errorMessage))])],1),e._v(" "),e._l(e.correctArry,function(t,s){return n("div",{directives:[{name:"show",rawName:"v-show",value:t.nextUpload,expression:"item.nextUpload"}],key:s},[n("div",[e._v("上传失败的问答数据已生成新的Excel文件，"),n("a",{attrs:{href:t.errorFilePath}},[e._v("点击下载")]),e._v("后重新上传")]),e._v(" "),n("div",{staticClass:"updload-list-box"},[n("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.errorMessage,expression:"!item.errorMessage"}],staticClass:"file-btn"},[n("el-input",{staticClass:"file-btn-inner-input",attrs:{multiple:"multiple",type:"file",id:t.id},on:{change:function(n){return e.uploadAnnexFile(t.id)}},model:{value:t.filePath,callback:function(n){e.$set(t,"filePath",n)},expression:"item.filePath"}}),e._v("\n                            选择文件上传\n                        ")],1),e._v(" "),n("span",{staticClass:"blue"},[e._v(e._s(t.excelPathTip))]),e._v(" "),n("span",{staticClass:"red"},[e._v(e._s(t.errorMessage))])],1)])})],2)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.addItemsVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveBatchKnowledgeItem("atchKnow")}}},[e._v("确 定")])],1)]),e._v(" "),n("el-dialog",{attrs:{title:"移动知识库",visible:e.moveKnoledgeVisible,width:"400px"},on:{"update:visible":function(t){e.moveKnoledgeVisible=t}}},[n("div",[e._v("\n            请选择：\n            "),n("el-cascader",{attrs:{options:e.industryOptions},on:{"active-item-change":e.handleItemChange},model:{value:e.changGroupOptions,callback:function(t){e.changGroupOptions=t},expression:"changGroupOptions"}})],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.moveKnoledgeVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.changGroup}},[e._v("确 定")])],1)]),e._v(" "),n("el-dialog",{attrs:{title:"匹配音频",visible:e.soundMatchVisible},on:{"update:visible":function(t){e.soundMatchVisible=t}}},[n("span",{staticStyle:{color:"#409EFF"}},[n("i",{staticClass:"el-icon-search primary"})]),e._v("已检测到音库中有"),n("span",{staticStyle:{color:"#409EFF"}},[e._v(e._s(e.tableSoundData.length)+"条")]),e._v("音频可以匹配给相应回答"),n("br"),e._v(" "),n("span",{staticStyle:{"font-size":"smaller"}},[e._v("已选"),n("span",{staticStyle:{color:"#E6A23C"}},[e._v(e._s(e.matchSoundList.length)+"条")])]),e._v(" "),n("el-table",{ref:"multipleMatchTable",staticStyle:{width:"100%"},attrs:{data:e.tableSoundData},on:{"selection-change":e.handleMatchSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),n("el-table-column",{attrs:{label:"音频"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{directives:[{name:"show",rawName:"v-show",value:t.row.soundPath,expression:"scope.row.soundPath"}],staticClass:"w_icon_play w_icon_pause",on:{click:function(n){return e.handleVideo(t.row)}}}),e._v(" "),n("span",[e._v(e._s(t.row.soundContent))])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"ansewrText",label:"回答"}})],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.soundMatchVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary",disabled:e.matchButtonDisabled},on:{click:e.matchSoundConfirm}},[e._v("匹 配")])],1)],1)],1)},staticRenderFns:[]};var u=n("VU/8")(l,c,!1,function(e){n("ivPe")},"data-v-6221cfac",null);t.default=u.exports}});