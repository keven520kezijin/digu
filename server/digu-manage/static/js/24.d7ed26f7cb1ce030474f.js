webpackJsonp([24],{C2i8:function(e,t){},"y+Gw":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=a("mvHQ"),n=a.n(r),s=a("bOdI"),l=a.n(s),o=(a("DHmE"),a("RJSf"),{name:"dashboard",data:function(){return l()({infoActiveName:"first",blackVisible:!1,moveVisible:!1,searchForm:{},cur_page:1,pagination:{show:!0,total:0,pageIndex:1,pageSize:20},multipleSelection:[],tableData:[]},"pagination",{show:!0,total:0,pageIndex:1,pageSize:20})},mounted:function(){this.queryMemberList()},methods:(i={handleCurrentChange:function(e){this.cur_page=e,this.queryMemberList()},handleTabClick:function(e){this.queryMemberList()},onSearch:function(){this.queryMemberList(this.searchForm)},onRefresh:function(){this.$refs.searchForm.resetFields(),this.searchForm.freeFlag="",this.searchForm.authenticationFlag="",this.searchForm.queryKey="",this.queryMemberList()},typeChange:function(e){},handleSelectionChange:function(e){this.multipleSelection=e},handleView:function(){},queryMemberList:function(e){var t=this,a=this,i={currentPage:this.cur_page-1,pageSize:this.pagination.pageSize};this.searchForm.queryKey&&(i.queryKey=this.searchForm.queryKey),"first"==this.infoActiveName?i.blacklistFlag=!1:i.blacklistFlag=!0,this.dateValue&&"second"==this.infoActiveName&&(i.approveStartTime=this.searchForm.approveStartTime,i.approveEndTime=this.searchForm.approveEndTime);var r=$.extend({},i,e);$.post(this.$baseUrl+"services/member/queryMemberList.json",n()(r)).then(function(e){if("0000"==e.resultMessageEnum){var i=e.returnObject.recordList;if(i.length){i.forEach(function(e,t){var a="";1==e.authenticationFlag?e.remarkName?a+='<span class="a">'+e.remarkName+'</span><span class="b">（'+e.enterpriseName+"）</span>":e.enterpriseName?a+='<span class="a">'+e.enterpriseName+"</span>":a+='<span class="a">未知</span>':e.remarkName?a+='<span class="a">'+e.remarkName+'</span><span class="b">（未知）</span>':a+='<span class="a">未知</span>',e.enterpriseNameHtml=a||'<span class="a">未知</span>'})}t.tableData=i,t.pagination.total=e.returnObject.totalNumber}else a.$message.error(e.errorInfoList[0].errorMessage)})},modifyMemberBlacklistFlag:function(e){var t=this,a=[];if(!this.multipleSelection.length)return this.$message.error("请选择要加入黑名单的用户！"),!1;this.multipleSelection.forEach(function(t){var i={blacklistFlag:e,memberId:t.memberId};a.push(i)}),$.post(this.$baseUrl+"services/member/modifyMemberBlacklistFlag.json",n()(a)).then(function(e){"0000"==e.resultMessageEnum?(t.$message.success("操作成功！"),t.blackVisible=!1,t.moveVisible=!1,t.queryMemberList()):t.$message.error(e.errorInfoList[0].errorMessage)})}},l()(i,"handleCurrentChange",function(e){this.cur_page=e,this.queryMemberList()}),l()(i,"handleEdit",function(e,t){this.$router.push("/auth/"+t.memberId)}),l()(i,"gotoUser",function(e,t,a){var i=!1;"second"==this.infoActiveName&&(i=!0),this.$router.push("/information/"+t.memberId+"?type="+a+"&blacklistFlag="+i)}),i)}),c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-admin"},[a("div",{staticClass:"admin-page"},[a("el-tabs",{on:{"tab-click":e.handleTabClick},model:{value:e.infoActiveName,callback:function(t){e.infoActiveName=t},expression:"infoActiveName"}},[a("el-tab-pane",{attrs:{label:"用户列表",name:"first"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"黑名单",name:"second"}})],1)],1),e._v(" "),a("div",{staticClass:"admin-body"},[a("el-row",{staticClass:"search-box"},[a("el-form",{ref:"searchForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchForm}},[a("el-form-item",{staticClass:"refresh-btn"},[a("el-button",{on:{click:e.onRefresh}},[e._v("刷新")])],1),e._v(" "),a("el-form-item",{attrs:{label:"付费"}},[a("el-select",{attrs:{placeholder:"全部"},on:{change:e.typeChange},model:{value:e.searchForm.freeFlag,callback:function(t){e.$set(e.searchForm,"freeFlag",t)},expression:"searchForm.freeFlag"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"付费",value:"false"}}),e._v(" "),a("el-option",{attrs:{label:"免费",value:"true"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"认证"}},[a("el-select",{attrs:{placeholder:"所有"},on:{change:e.typeChange},model:{value:e.searchForm.authenticationFlag,callback:function(t){e.$set(e.searchForm,"authenticationFlag",t)},expression:"searchForm.authenticationFlag"}},[a("el-option",{attrs:{label:"所有",value:""}}),e._v(" "),a("el-option",{attrs:{label:"已认证",value:"true"}}),e._v(" "),a("el-option",{attrs:{label:"未认证",value:"false"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"关键词"}},[a("el-input",{attrs:{placeholder:"企业名称／注册手机号"},nativeOn:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.onSearch(t):null}},model:{value:e.searchForm.queryKey,callback:function(t){e.$set(e.searchForm,"queryKey",t)},expression:"searchForm.queryKey"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[e._v("搜索")])],1),e._v(" "),a("el-form-item",{staticClass:"black－btn"},["first"==e.infoActiveName?a("el-button",{on:{click:function(t){e.blackVisible=!0}}},[e._v("加入黑名单")]):a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.moveVisible=!0}}},[e._v("移出黑名单")])],1)],1)],1),e._v(" "),a("div",{staticClass:"information-data-box"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"用户名称",prop:"enterpriseName"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"enterpriseName",domProps:{innerHTML:e._s(t.row.enterpriseNameHtml)}}),e._v(" "),0==t.row.freeFlag?a("el-button",{attrs:{size:"mini",type:"primary"}},[e._v("付费")]):a("el-button",{staticClass:"free-btn",attrs:{size:"mini"}},[e._v("免费")]),e._v(" "),1==t.row.authenticationFlag?a("el-button",{staticClass:"type-box-1",attrs:{size:"mini"}},[e._v("已认证")]):a("el-button",{staticClass:"type-box-0",attrs:{size:"mini"}},[e._v("未认证")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"accountName",label:"注册手机号",width:"340"}}),e._v(" "),a("el-table-column",{attrs:{width:"320",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.gotoUser(t.$index,t.row,1)}}},[e._v("基本信息")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.gotoUser(t.$index,t.row,2)}}},[e._v("充值管理")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.gotoUser(t.$index,t.row,3)}}},[e._v("消费记录")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.gotoUser(t.$index,t.row,4)}}},[e._v("通话统计")])],1)]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next,jumper",total:e.pagination.total,"page-size":e.pagination.pageSize},on:{"current-change":e.handleCurrentChange}})],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"加入黑名单",visible:e.blackVisible,width:"600px",center:""},on:{"update:visible":function(t){e.blackVisible=t}}},[a("div",{staticClass:"overrule-dialog-cnt black-dialog"},[e._v("\n      您确认要将选中的用户加入黑名单吗？加入黑名单后该用户将被禁止登录\n    ")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.blackVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.modifyMemberBlacklistFlag(!0)}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"移出黑名单",visible:e.moveVisible,width:"600px",center:""},on:{"update:visible":function(t){e.moveVisible=t}}},[a("div",{staticClass:"overrule-dialog-cnt black-dialog"},[e._v("\n      您确认要将选中的用户移出黑名单吗？移动后将恢复至用户列表\n    ")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.moveVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.modifyMemberBlacklistFlag(!1)}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var u=a("VU/8")(o,c,!1,function(e){a("C2i8")},"data-v-57406973",null);t.default=u.exports}});