webpackJsonp([32],{"+wF/":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("mvHQ"),s=r.n(a),o=r("WfbR"),i={name:"auth",data:function(){return{phase:"",overruleVisible:!1,byVisible:!1,authForm:{enterpriseName:""},checkboxList:["身份证照与法人信息不符合","身份证照片不清晰","营业执照照片不清晰","营业执照信息与企业不符"],formOverrule:{type:[],desc:""},errors:{formOverruleType:""},iframeSrc:""}},mounted:function(){document.documentElement.clientHeight},created:function(){this.phase=this.$route.query.phase,this.queryMemberDetail()},methods:{resetForm:function(){},onSubmit:function(){},changeCheckbox:function(e){e.length&&(this.errors.formOverruleType="")},addHandle:function(){var e=this.checkboxList;e.push(""),this.checkboxList=e},changeInput:function(e){this.errors.formOverruleType=""},queryMemberDetail:function(){var e=this,t=this,r={memberId:this.$route.params.id};$.get(this.$baseUrl+"services/member/queryMemberDetail.json",$.param(r)).then(function(r){if("0000"==r.resultMessageEnum){var a=r.returnObject,s=e.$baseHost+"services/common/showPictureFile.html?pictureFileName=";a.identityCardFrontPath=s+""+a.identityCardFrontPath,a.identityCardBackPath=s+""+a.identityCardBackPath,a.businessLicensePath=s+a.businessLicensePath,a.authenticationPhase=o.a.formatterPhase(a.authenticationPhase),a.authenticationFlag=0==a.authenticationFlag?"未认证":"已认证",a.latestApproveRejectReason&&(a.latestApproveRejectReason=a.latestApproveRejectReason.join(",")),e.authForm=a}else t.$message.error(r.errorInfoList[0].errorMessage)})},approveAuthentificationResult:function(e){var t=this,r=[];if(!e){if(!this.formOverrule.type.length&&!this.formOverrule.desc)return this.errors.formOverruleType="请勾选驳回原因或填写其他原因！",!1;if(this.formOverrule.desc.length>120)return this.errors.formOverruleType="超过字数限制！",!1}var a={id:this.$route.params.id,resultFlag:e};e||(r=r.concat(this.formOverrule.type),this.formOverrule.desc&&r.push(this.formOverrule.desc),a.rejectReason=s()(r)),$.post(this.$baseUrl+"services/member/approveAuthentificationResult.json",s()(a)).then(function(e){"0000"==e.resultMessageEnum?(t.$message.success("操作成功！"),t.byVisible=!1,t.overruleVisible=!1,t.$router.push("/certification")):t.$message.error(e.errorInfoList[0].errorMessage)})},createExportTaskItemExcelFile:function(){},handleOverrule:function(){this.overruleVisible=!0}}},l={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container-admin"},[r("el-row",{staticClass:"back-btn-box"},[r("router-link",{attrs:{to:"/certification"}},[r("el-button",[e._v("返回")])],1)],1),e._v(" "),r("div",{staticClass:"admin-body"},[r("div",{staticClass:"w-box-card"},[e._m(0),e._v(" "),r("div",{staticClass:"w-card__body"},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:14}},[r("el-form",{ref:"authForm",attrs:{model:e.authForm,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"企业中文全称："}},[e._v("\n                                "+e._s(e.authForm.enterpriseName)+"\n                            ")]),e._v(" "),r("el-form-item",{attrs:{label:"法人代表姓名："}},[e._v("\n                                "+e._s(e.authForm.legalRepresentative)+"\n                            ")]),e._v(" "),r("el-form-item",{attrs:{label:"法人身份证号："}},[e._v("\n                                "+e._s(e.authForm.legalRepresentativeCardNumber)+"\n                            ")]),e._v(" "),r("el-form-item",{attrs:{label:"法人身份证照："}},[r("el-row",{staticClass:"photo-box"},[r("el-col",{attrs:{span:12}},[r("div",{staticClass:"photo"},[r("img",{attrs:{src:e.authForm.identityCardFrontPath,alt:""}}),e._v(" "),r("span",[e._v("正面")])])]),e._v(" "),r("el-col",{attrs:{span:12}},[r("div",{staticClass:"photo"},[r("img",{attrs:{src:e.authForm.identityCardBackPath,alt:""}}),e._v(" "),r("span",[e._v("反面")])])])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"企业营业执照："}},[r("div",{staticClass:"photo"},[r("img",{attrs:{src:e.authForm.businessLicensePath,alt:""}})])])],1)],1),e._v(" "),r("el-col",{attrs:{span:10}},[r("el-form",{ref:"authForm",attrs:{model:e.authForm,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"申请时间："}},[e._v("\n                                "+e._s(e.authForm.latestApplyTime)+"\n                            ")]),e._v(" "),r("el-form-item",{attrs:{label:"申请人："}},[e._v("\n                                "+e._s(e.authForm.latestApplyName)+"\n                            ")]),e._v(" "),r("el-form-item",{staticClass:"authForm-waning",attrs:{label:"截止时间："}},[e._v("\n                                "+e._s(e.authForm.latestApproveEndTime)+"\n                                "),r("span",{directives:[{name:"show",rawName:"v-show",value:2==e.authForm.timeOverType,expression:"authForm.timeOverType==2"}]},[e._v("即将截止")]),e._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:3==e.authForm.timeOverType,expression:"authForm.timeOverType==3"}]},[e._v("已超时")])]),e._v(" "),r("el-form-item",{attrs:{label:"审核时间："}},[e._v("\n                                "+e._s(e.authForm.latestApproveTime)+"\n                            ")]),e._v(" "),r("el-form-item",{attrs:{label:"审核人："}},[e._v("\n                                "+e._s(e.authForm.latestApproveManagerName)+"\n                            ")]),e._v(" "),r("el-form-item",{attrs:{label:"审核状态："}},[e._v("\n                                "+e._s(e.authForm.authenticationPhase)+"\n                            ")]),e._v(" "),r("el-form-item",{attrs:{label:"认证结果："}},[e._v("\n                                "+e._s(e.authForm.authenticationFlag)+"\n                            ")]),e._v(" "),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.authForm.latestApproveRejectReason,expression:"authForm.latestApproveRejectReason"}],attrs:{label:"失败原因："}},[e._v("\n                                "+e._s(e.authForm.latestApproveRejectReason)+"\n                            ")])],1)],1)],1)],1),e._v(" "),r("div",{staticClass:"w-card__footer"},[r("el-button",{directives:[{name:"show",rawName:"v-show",value:1==e.phase||5==e.phase,expression:"phase==1||phase==5"}],attrs:{type:"danger"},on:{click:function(t){e.overruleVisible=!0}}},[e._v("驳回")]),e._v(" "),r("el-button",{directives:[{name:"show",rawName:"v-show",value:1==e.phase||5==e.phase,expression:"phase==1||phase==5"}],attrs:{type:"success"},on:{click:function(t){e.byVisible=!0}}},[e._v("通过")])],1)])]),e._v(" "),r("el-dialog",{attrs:{title:"通过认证申请",visible:e.byVisible,width:"600px",center:""},on:{"update:visible":function(t){e.byVisible=t}}},[r("div",{staticClass:"overrule-dialog-cnt by-dialog"},[e._v("\n            您确认已对改企业的认证信息核查无误，要对其认证申请予以通过吗？\n        ")]),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.byVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.approveAuthentificationResult(!0)}}},[e._v("确认通过")])],1)]),e._v(" "),r("el-dialog",{attrs:{title:"驳回认证申请",visible:e.overruleVisible,width:"600px",center:""},on:{"update:visible":function(t){e.overruleVisible=t}}},[r("div",{staticClass:"overrule-dialog-cnt"},[r("el-form",{ref:"formOverruleForm",attrs:{model:e.formOverrule,"label-width":"90px"}},[r("el-form-item",{staticClass:"form-item-check",attrs:{label:"驳回原因：（可多选）",prop:"type"}},[r("el-checkbox-group",{on:{change:e.changeCheckbox},model:{value:e.formOverrule.type,callback:function(t){e.$set(e.formOverrule,"type",t)},expression:"formOverrule.type"}},e._l(e.checkboxList,function(e,t){return r("el-checkbox",{key:t,attrs:{label:e,name:"type"}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"其他原因：",error:e.errors.formOverruleType,prop:"desc"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请补充填写驳回认证申请的原因，120字符以内"},on:{change:e.changeInput},model:{value:e.formOverrule.desc,callback:function(t){e.$set(e.formOverrule,"desc",t)},expression:"formOverrule.desc"}})],1)],1),e._v(" "),r("div")],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.overruleVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.approveAuthentificationResult(!1)}}},[e._v("确认驳回")])],1)])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"w-card__header"},[t("span",[this._v("认证信息")])])}]};var n=r("VU/8")(i,l,!1,function(e){r("93op")},"data-v-144bda04",null);t.default=n.exports},"93op":function(e,t){}});