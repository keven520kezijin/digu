webpackJsonp([34],{HOfW:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("mvHQ"),n=o.n(r),i={data:function(){var e=this;return{activeName:"first",robotLineConfigVO:{total:"",allowed:"",robotLineDistributionRatios:[]},rules:{total:[{validator:function(e,t,o){t?o():o(new Error("请输入线路总数"))}}],allowed:[{validator:function(t,o,r){o?parseInt(o)>parseInt(e.robotLineConfigVO.total)?r(new Error("允许分配的线路数必须小于等于线路总数")):r():r(new Error("请输入允许分配的线路数"))}}],distributionRatio:[{validator:function(t,o,r){for(var n=0,i=0;i<e.robotLineConfigVO.robotLineDistributionRatios.length;i++)console.log("==="+e.robotLineConfigVO.robotLineDistributionRatios[i].systemValue),n+=parseInt(e.robotLineConfigVO.robotLineDistributionRatios[i].systemValue);console.log(n),100!==n?r(new Error("各级比数值的总和必须等于100")):r()}}]},total:null,pageInfo:{queryKey:null,currentPage:1,pageSize:20},taskData:[]}},created:function(){var e=this;$.get(this.$baseUrl+"services/config/queryRobotLineConfig.json").then(function(t){"0000"==t.resultMessageEnum?(e.robotLineConfigVO=t.returnObject,console.log(e.robotLineConfigVO)):e.$message.error(t.errorInfoList[0].errorMessage)})},methods:{handleClick:function(e,t){var o=this;console.log(e,t),"second"===this.activeName&&$.post(this.$baseUrl+"services/config/getTaskDistribut.json",n()(this.pageInfo)).then(function(e){if("0000"==e.resultMessageEnum){var t=e.returnObject;o.total=t.totalNumber,o.taskData=t.recordList}else o.$message.error(e.errorInfoList[0].errorMessage)})},handleCurrentChange:function(e){var t=this;this.pageInfo.currentPage=e,$.post(this.$baseUrl+"services/config/getTaskDistribut.json",n()(this.pageInfo)).then(function(e){if("0000"==e.resultMessageEnum){var o=e.returnObject;t.total=o.totalNumber,t.taskData=o.recordList}else t.$message.error(e.errorInfoList[0].errorMessage)})},search:function(){var e=this;$.post(this.$baseUrl+"services/config/getTaskDistribut.json",n()(this.pageInfo)).then(function(t){if("0000"==t.resultMessageEnum){var o=t.returnObject;e.total=o.totalNumber,e.taskData=o.recordList}else e.$message.error(t.errorInfoList[0].errorMessage)})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;$.post(t.$baseUrl+"services/config/updateRobotLineConfig.json",n()(t.robotLineConfigVO)).then(function(e){"0000"==e.resultMessageEnum?t.$message.success("保存成功"):t.$message.error(e.errorInfoList[0].errorMessage)})})}}},a={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"机器人线路分配",name:"first"}},[o("el-form",{ref:"form",staticStyle:{width:"450px"},attrs:{rules:e.rules,model:e.robotLineConfigVO,"label-width":"100px",size:"medium"}},[o("el-form-item",{attrs:{label:"线路总数",required:"",prop:"total"}},[o("el-input-number",{attrs:{"controls-position":"right",min:1},model:{value:e.robotLineConfigVO.total,callback:function(t){e.$set(e.robotLineConfigVO,"total",t)},expression:"robotLineConfigVO.total"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"允许分配",required:"",prop:"allowed"}},[o("el-input-number",{attrs:{"controls-position":"right",min:1},model:{value:e.robotLineConfigVO.allowed,callback:function(t){e.$set(e.robotLineConfigVO,"allowed",t)},expression:"robotLineConfigVO.allowed"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"分配比例",prop:"distributionRatio"}},[e._l(e.robotLineConfigVO.robotLineDistributionRatios,function(t,r){return o("el-col",{key:r},[e._v("\n          "+e._s(t.valueName)+"：\n          "),o("el-input",{staticStyle:{width:"60px"},attrs:{type:"text",size:"medium"},model:{value:e.robotLineConfigVO.robotLineDistributionRatios[r].systemValue,callback:function(t){e.$set(e.robotLineConfigVO.robotLineDistributionRatios[r],"systemValue",t)},expression:"robotLineConfigVO.robotLineDistributionRatios[index].systemValue"}}),e._v("\n          %\n        ")],1)}),e._v("\n        注：该比例为高、中、低各优先级的线路分配比；各级比数值的总和必须等于100\n      ")],2),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("form")}}},[e._v("保存")])],1)],1)],1),e._v(" "),o("el-tab-pane",{attrs:{label:"任务分配详情",name:"second"}},[o("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[o("el-form-item",{attrs:{label:"关键词"}},[o("el-input",{attrs:{placeholder:"任务名称"},nativeOn:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.search(t):null}},model:{value:e.pageInfo.queryKey,callback:function(t){e.$set(e.pageInfo,"queryKey",t)},expression:"pageInfo.queryKey"}})],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.search()}}},[e._v("搜索")])],1)],1),e._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.taskData}},[o("el-table-column",{attrs:{prop:"name",label:"任务名称",width:"280"}}),e._v(" "),o("el-table-column",{attrs:{prop:"maxAllowAgent",label:"当前线路数",width:"180"}})],1),e._v(" "),o("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:this.total,"page-size":20},on:{"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]},s=o("VU/8")(i,a,!1,null,null,null);t.default=s.exports}});