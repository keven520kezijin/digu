webpackJsonp([36],{"85Q7":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("mvHQ"),r=s.n(a),i=s("Xxa5"),n=s.n(i),c=s("exGp"),l=s.n(c),o=(s("GeYD"),s("uSxg")),u=s("o3iK"),d={components:{wVideo:o.a},data:function(){return{userInfo:null,taskId:null,viewPlaying:!1,taskItemResultRecognition:[],taskCheckResult:[],viewTableData:[],transferFlag:null,viewSource:"",checkForm:{checkResult:"",taskItemId:""},itemDetail:{}}},computed:{checkRules:function(){return{checkResult:[{required:!0,message:"备注内容不能为空！",trigger:"change"}]}},taskName:function(){return this.$route.query.sname?u.a.decodeUnicode(this.$route.query.sname):"错误"}},created:function(){this.userInfo=JSON.parse(localStorage.getItem("USER_INFO"))},mounted:function(){this.queryTaskResultRecognition(),this.fetchTaskItemDetail()},methods:{queryTaskResultRecognition:function(){var e=this,t=this.$route.params.id;this.taskItemResultRecognition=[],this.taskCheckResult=[],this.checkForm.taskItemId=t;var s={taskItemId:t};$.get(this.$baseUrl+"task/queryTaskResultRecognition.json",$.param(s)).then(function(t){"0000"==t.resultMessageEnum?t.returnObject&&(e.taskItemResultRecognition=t.returnObject,e.transferFlag=t.returnObject.transferFlag,setTimeout(function(){e.viewSource=t.returnObject.soundPath},200),t.returnObject.recognitionContent&&(e.viewTableData=JSON.parse(t.returnObject.recognitionContent)),t.returnObject.taskCheckResult&&(e.taskCheckResult=t.returnObject.taskCheckResult),e.taskId=t.returnObject.taskId):e.$message.error(t.errorInfoList[0].errorMessage)})},fetchTaskItemDetail:function(){var e=this;return l()(n.a.mark(function t(){var s;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$apiClient.get("task/queryTaskItemDetail.json",{params:{taskItemId:e.$route.params.id}});case 3:s=t.sent,e.itemDetail=s.returnObject,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.$message.error(t.t0.errorInfoList[0].errorMessage);case 10:case"end":return t.stop()}},t,e,[[0,7]])}))()},submitCheckResult:function(){var e=this;this.$refs.checkForm.validate(function(t){if(!t)return!1;var s={isChecker:-1===e.userInfo.role.indexOf(1)&&-1===e.userInfo.role.indexOf(2),checkCheckerId:e.userInfo.id,taskItemId:e.checkForm.taskItemId,checkResult:e.checkForm.checkResult,taskId:e.taskId};$.post(e.$baseUrl+"task/submitCheckResult.json",r()(s)).then(function(t){"0000"==t.resultMessageEnum?(e.viewVisible=!1,e.$message.success("提交成功！"),e.queryTaskResultRecognition()):e.$message.error(t.errorInfoList[0].errorMessage)})})}},watch:{}},m={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("p",{staticClass:"bread-crumbs"},[s("el-link",{staticClass:"return-back",attrs:{underline:!1,type:"primary",href:"#/task"}},[e._v("任务列表")]),e._v(" "),s("em",[e._v("/")]),e._v(" "),s("el-link",{staticClass:"return-back",attrs:{underline:!1,type:"primary",href:"#/task/"+e.taskId+"?sname="+this.$route.query.sname}},[e._v(e._s(e.taskName))]),e._v(" "),s("em",[e._v("/")]),e._v(" "),s("span",[e._v("识别详情")])],1),e._v(" "),s("el-card",{staticClass:"box-card",attrs:{header:"客户信息"}},[s("dl",[s("dt",[e._v("姓名：")]),e._v(" "),s("dd",[e._v(e._s(e.itemDetail.customerName))])]),e._v(" "),s("dl",[s("dt",[e._v("号码：")]),e._v(" "),s("dd",[e._v(e._s(e.itemDetail.phone))])])]),e._v(" "),s("el-card",{staticClass:"box-card",attrs:{header:"对话录音"}},[s("w-video",{attrs:{source:e.viewSource,playing:e.viewPlaying}})],1),e._v(" "),s("el-card",{staticClass:"box-card",attrs:{header:"通话情况"}},[s("dl",[s("dt",[e._v("通话时间：")]),e._v(" "),s("dd",[e._v(e._s(e.itemDetail.callTime))])]),e._v(" "),s("dl",[s("dt",[e._v("通话时长：")]),e._v(" "),s("dd",[e._v(e._s(e.itemDetail.connectedDuration)+"秒")])]),e._v(" "),s("dl",[s("dt",[e._v("对话轮数：")]),e._v(" "),s("dd",[e._v(e._s(e.itemDetail.interactTimes)+"轮")])]),e._v(" "),s("dl",[s("dt",[e._v("知识库触发量：")]),e._v(" "),s("dd",[e._v(e._s(e.itemDetail.krcCount)+"个")])]),e._v(" "),s("dl",[s("dt",[e._v("不理解次数：")]),e._v(" "),s("dd",[e._v(e._s(e.itemDetail.intentUncertainCount)+"次")])]),e._v(" "),s("dl",[s("dt",[e._v("挂断情况：")]),e._v(" "),s("dd",[e._v(e._s(1===e.itemDetail.hangUpSituation?"用户":"机器人"))])]),e._v(" "),s("dl",[s("dt",[e._v("挂断节点：")]),e._v(" "),s("dd",[e._v(e._s(e.itemDetail.hangUpNode))])])]),e._v(" "),s("el-card",{staticClass:"box-card",attrs:{header:"识别内容"}},[s("div",{staticClass:"recording-box-main dialogue-list"},[s("ul",{staticClass:"dialogue-list-data"},[e._l(e.viewTableData,function(t,a){return["Agent"===t.role&&t.text?s("li",{key:a,staticClass:"seat-dialogue"},[s("i",{staticClass:"icon icon-robot"}),e._v(" "),s("span",{staticClass:"tip"},[e._v(e._s(t.text))])]):"User"===t.role&&t.text?s("li",{key:a,staticClass:"client-dialogue"},[s("i",{staticClass:"icon icon-user"}),e._v(" "),s("span",{staticClass:"tip"},[e._v(e._s(t.text))])]):e._e()]})],2)])]),e._v(" "),s("el-card",{attrs:{header:"备注","body-style":{padding:"0px"}}},[s("el-table",{staticStyle:{width:"100%","padding-top":"20px"},attrs:{data:e.taskCheckResult,"empty-text":"暂无质检结果",stripe:""}},[s("el-table-column",{attrs:{prop:"checkerName",label:"质检人",width:"180"}}),e._v(" "),s("el-table-column",{attrs:{prop:"result",label:"质检结果"}})],1),e._v(" "),s("el-form",{ref:"checkForm",staticStyle:{"padding-top":"20px"},attrs:{inline:!0,rules:e.checkRules,model:e.checkForm,"label-width":"80px"}},[s("el-form-item",{attrs:{prop:"checkResult",label:"备注："}},[s("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",placeholder:"请输入备注内容",maxlength:"200",rows:"2","show-word-limit":""},model:{value:e.checkForm.checkResult,callback:function(t){e.$set(e.checkForm,"checkResult",t)},expression:"checkForm.checkResult"}})],1),e._v(" "),s("el-form-item",[s("el-button",{staticClass:"button",attrs:{type:"primary"},on:{click:e.submitCheckResult}},[e._v("保存")])],1)],1)],1)],1)},staticRenderFns:[]};var v=s("VU/8")(d,m,!1,function(e){s("rG30")},"data-v-0273b2a2",null);t.default=v.exports},rG30:function(e,t){}});