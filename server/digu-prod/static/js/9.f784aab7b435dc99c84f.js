webpackJsonp([9],{KxLm:function(e,t){},VIBS:function(e,t,a){"use strict";var s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cer-page"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0==e.status,expression:"status==0"}],staticClass:"no-cer",class:{gray:e.disabled}},[e._m(0),e._v(" "),e.disabled?a("el-button",{attrs:{type:"info",disabled:""}},[e._v("立即认证")]):a("el-button",{attrs:{type:"primary"},on:{click:e.handleCertificate}},[e._v("立即认证")]),e._v(" "),a("span",{staticClass:"tip"},[e._v(e._s(e.tipTxt))])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.status,expression:"status==1"}],staticClass:"steps-box"},[a("el-steps",{attrs:{active:e.num}},[a("el-step",{attrs:{title:"企业认证申请"}}),e._v(" "),a("el-step",{attrs:{title:"24h内完成审核"}}),e._v(" "),3==e.num?a("el-step",{attrs:{title:"审核完成"}}):4==e.num?a("el-step",{staticClass:"warning",attrs:{title:"认证失败"}}):e._e()],1),e._v(" "),a("a",{directives:[{name:"show",rawName:"v-show",value:4==e.num,expression:"num==4"}],staticClass:"warning-tip",on:{click:e.handleCertificate}},[e._v("重新认证")])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.status&&3==e.num,expression:"status==1 && num==3"}],staticClass:"success-box"},[e._m(1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("span",[t("i",{staticClass:"w_ico_certificate-grey"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"success-tip"},[t("i",{staticClass:"w_ico_certificate"}),this._v("企业认证成功！可以开始创建话术任务啦！")])}]};var r=a("VU/8")({data:function(){return{id:"a",isCerSteps:!1,tipTxt:"您还未进行企业认证，不能创建外呼任务！",disabled:!1}},props:["status","num"],components:{},created:function(){},methods:{handleCertificate:function(){this.$emit("cerPop",!0)}},watch:{num:function(e){0==e&&(this.tipTxt="您还未进行企业认证，不能创建外呼任务"),1!=e&&2!=e||(this.tipTxt="24小时完成审核，请等待"),4==e&&(this.tipTxt="已驳回"),5==e&&(this.tipTxt="24小时完成审核，请等待"),1!=e&&2!=e&&3!=e&&5!=e||(this.disabled=!0)}}},s,!1,function(e){a("KxLm")},"data-v-ae45591c",null);t.a=r.exports},VTud:function(e,t){},rUJS:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("mvHQ"),r=a.n(s),i=a("GeYD"),o=a("VIBS"),n=a("VI/i"),l=a.n(n),c={name:"baseform",data:function(){var e=this;return{upload_img_url:this.$baseUrl+"common/showPictureFile.html?pictureFileName=",passwordType:"password",passwordClass:"el-icon-lx-attention",newPasswordType:"password",newPasswordClass:"el-icon-lx-attention",checkPassType:"password",checkPassClass:"el-icon-lx-attention",authenticationVisible:!1,authenticationFlag:0,authenticationPhase:0,fileList:[],avatar_custom_img:"",cardFrontImageUrl:"",cardBackImageUrl:"",businessImageUrl:"",userForm:{avatar:"2",id:"",avatarPath:"",contactName:"",contactMobile:"",enterpriseEmail:"",desc:"",groupName:"",roleName:"",role:[]},userRules:{contactName:[{required:!0,message:"用户名不能为空！"}],enterpriseEmail:[{required:!0,message:"邮箱地址不能为空！"}],contactMobile:[{required:!0,message:"电话号码不能为空！"}]},passForm:{password:"",newPassword:""},passRules:{password:[{required:!0,message:"密码不能为空！"}],newPassword:[{required:!0,message:"请新输入密码",trigger:"blur"},{validator:function(e,t,a){0==/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,20}$/.test(t)?a(new Error("输入8-20位字母数据结合密码")):a()},trigger:"change"}],checkPass:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:function(t,a,s){a!==e.passForm.newPassword?s(new Error("两次输入密码不一致!")):s()},trigger:"change"}]},authenticationForm:{enterpriseName:"",legalRepresentative:"",legalRepresentativeCardNumber:"",identityCardFrontPath:"",identityCardBackPath:"",businessLicensePath:""},authenticationRules:{enterpriseName:[{required:!0,message:"企业中文全称不能为空！"}],legalRepresentative:[{required:!0,message:"法人代表姓名不能为空！"}],legalRepresentativeCardNumber:[{required:!0,message:"请正确输入18位身份证号！"}],identityCardFrontPath:[{required:!0,message:"请上传身份证正面！"}],identityCardBackPath:[{required:!0,message:"请上传身份证反面！"}],businessLicensePath:[{required:!0,message:"请上传营业执照！"}]}}},created:function(){this.queryMemberDetail()},methods:{showPassword:function(e){"password"==e?"text"===this.passwordType?(this.passwordType="password",this.passwordClass=""):(this.passwordType="text",this.passwordClass="active"):"newPassword"==e?"text"===this.newPasswordType?(this.newPasswordType="password",this.newPasswordClass=""):(this.newPasswordType="text",this.newPasswordClass="active"):"text"===this.checkPassType?(this.checkPassType="password",this.checkPassClass=""):(this.checkPassType="text",this.checkPassClass="active")},avatarChange:function(e){this.userForm.avatar=e},saveChangePassBtn:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.modifyMemberPassword()})},onSubmit:function(){this.$message.success("提交成功！")},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},handleExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件")},beforeRemove:function(e,t){return this.$confirm("确定移除 "+e.name+"？")},queryMemberDetail:function(){var e=this;$.get(this.$baseUrl+"member/queryMemberDetail.json").then(function(t){if("0000"==t.resultMessageEnum){var a=t.returnObject;a.avatarPath&&a.avatarPath.indexOf("female")>-1?a.avatar="1":a.avatarPath&&a.avatarPath.indexOf("male")>-1?a.avatar="2":e.avatar_custom_img=e.upload_img_url+a.avatarPath,e.userForm=$.extend({},a),e.authenticationForm=a,e.userForm.id=a.id,e.cardFrontImageUrl=e.upload_img_url+a.identityCardFrontPath,e.cardBackImageUrl=e.upload_img_url+a.identityCardBackPath,e.businessImageUrl=e.upload_img_url+a.businessLicensePath,e.authenticationFlag=a.authenticationFlag||0,e.authenticationPhase=a.authenticationPhase||0,e.userForm.groupName=a.groupName,e.userForm.roleName=a.roleName,e.userForm.role=a.role}else e.$message.error(t.errorInfoList[0].errorMessage)})},uploadAvatar:function(){var e=this;this.uploadAnnexFile($("#file")[0].files[0]).then(function(t){if(t){e.userForm.avatar="";var a=e.upload_img_url+t.returnObject;e.userForm.avatarPath=t.returnObject,e.avatar_custom_img=a}})},uploadAnnexFile:function(e){var t=$.Deferred(),a=this,s=new FormData;return s.append("sourceType",101),s.append("file",e),$.ajax({url:this.$baseUrl+"common/uploadAnnexFile.json",type:"POST",cache:!1,data:s,dataType:"json",headers:{"Content-Type":"multipart/form-data"},processData:!1,contentType:!1,async:!1}).done(function(e){"0000"==e.resultMessageEnum?t.resolve(e):a.$message.error("上传失败！")}).fail(function(e){}),t},modifyBase:function(){"1"==this.userForm.avatar?this.userForm.avatarPath="common-static/static/img/ico_female.png":"2"==this.userForm.avatar&&(this.userForm.avatarPath="common-static/static/img/ico_male.png");var e={id:this.userForm.id,contactName:this.userForm.contactName,description:this.userForm.description,enterpriseEmail:this.userForm.enterpriseEmail,accountEmail:this.userForm.enterpriseEmail,contactMobile:this.userForm.contactMobile,contactPhone:this.userForm.contactMobile,avatarPath:this.userForm.avatarPath};this.modifyMember(e)},modifyMember:function(e){var t=this,a=$.Deferred();return $.post(this.$baseUrl+"member/modifyMember.json",r()(e)).then(function(e){if("0000"==e.resultMessageEnum){t.queryMemberDetail(),a.resolve(e);var s={head:t.userForm.avatarPath};i.a.$emit("updateUser",s),t.$message.success("修改成功！")}else t.$message.error(e.errorInfoList[0].errorMessage)}),a},newAuth:function(e){var t=this,a=$.Deferred();return $.post(this.$baseUrl+"member/newAuth.json",r()(e)).then(function(e){"0000"==e.resultMessageEnum?(a.resolve(e),t.$message.success("申请成功！")):t.$message.error(e.errorInfoList[0].errorMessage)}),a},modifyMemberPassword:function(){var e=this,t=l.a.createHash("md5");t.update(this.passForm.password);var a=t.digest("hex"),s=l.a.createHash("md5");s.update(this.passForm.newPassword);var i=s.digest("hex"),o={memberId:this.userForm.id,oldPassword:a,newPassword:i};$.post(this.$baseUrl+"member/modifyMemberPassword.json",r()(o)).then(function(t){"0000"==t.resultMessageEnum?e.$message.success("修改密码成功！"):e.$message.error(t.errorInfoList[0].errorMessage)})},HttpCardFront:function(e){var t=this;this.uploadAnnexFile(e.file).then(function(e){t.authenticationForm.identityCardFrontPath=e.returnObject,t.cardFrontImageUrl=t.upload_img_url+e.returnObject})},HttpCardBack:function(e){var t=this;this.uploadAnnexFile(e.file).then(function(e){t.authenticationForm.identityCardBackPath=e.returnObject,t.cardBackImageUrl=t.upload_img_url+e.returnObject})},HttpBusiness:function(e){var t=this;this.uploadAnnexFile(e.file).then(function(e){t.authenticationForm.businessLicensePath=e.returnObject,t.businessImageUrl=t.upload_img_url+e.returnObject})},handleAuthentication:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var a=t.authenticationForm;a.id=t.userForm.id,t.newAuth(a).then(function(e){t.authenticationVisible=!1,t.queryMemberDetail()})})},cerPop:function(e){e&&(this.authenticationVisible=!0)}},components:{vCer:o.a}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"accont-body"},[a("div",{staticClass:"w-container"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("企业认证")])]),e._v(" "),a("div",[1==e.authenticationFlag||0==e.authenticationFlag&&3==e.authenticationPhase?a("span",{staticClass:"blue"},[e._v(e._s(1==e.authenticationFlag?"企业认证成功！可以开始创建话术任务啦！":"已认证"))]):2==e.authenticationFlag?a("span",{staticClass:"blue"},[e._v("已暂缓认证，可以开始创建话术任务啦！")]):a("v-cer",{attrs:{status:e.authenticationFlag,num:e.authenticationPhase},on:{cerPop:e.cerPop}})],1)])],1),e._v(" "),a("div",{staticClass:"w-container"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("基本信息")])]),e._v(" "),a("div",[a("el-form",{ref:"userForm",attrs:{model:e.userForm,rules:e.userRules,"label-width":"80px"}},[a("el-form-item",{staticClass:"user-avatar-item",attrs:{label:"头像"}},[a("el-radio",{staticClass:"female",attrs:{label:"1"},on:{change:e.avatarChange},model:{value:e.userForm.avatar,callback:function(t){e.$set(e.userForm,"avatar",t)},expression:"userForm.avatar"}}),e._v(" "),a("el-radio",{staticClass:"male",attrs:{label:"2"},on:{change:e.avatarChange},model:{value:e.userForm.avatar,callback:function(t){e.$set(e.userForm,"avatar",t)},expression:"userForm.avatar"}}),e._v(" "),a("el-radio",{staticClass:"custom",style:{backgroundImage:"url("+e.avatar_custom_img+")"},attrs:{label:"3"}},[a("span",{staticClass:"custom-btn-box"},[e._v("\n                                自定义\n                            ")]),e._v(" "),a("el-input",{attrs:{type:"file",id:"file"},on:{change:e.uploadAvatar}})],1),e._v(" "),a("span",{staticClass:"custom-tip"},[e._v("您可以选择jpg,gif,png,jpeg格式的图片，最大3MB")])],1),e._v(" "),-1==e.userForm.role.indexOf(1)?a("el-form-item",{attrs:{label:"角色"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.userForm.roleName,callback:function(t){e.$set(e.userForm,"roleName",t)},expression:"userForm.roleName"}})],1):e._e(),e._v(" "),-1!==e.userForm.role.indexOf(2)?a("el-form-item",{attrs:{label:"组名"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.userForm.groupName,callback:function(t){e.$set(e.userForm,"groupName",t)},expression:"userForm.groupName"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"用户名",prop:"name"}},[a("el-input",{attrs:{placeholder:"输入用户名"},model:{value:e.userForm.contactName,callback:function(t){e.$set(e.userForm,"contactName",t)},expression:"userForm.contactName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[a("el-input",{attrs:{placeholder:"输入电话号码",disabled:!0},model:{value:e.userForm.contactMobile,callback:function(t){e.$set(e.userForm,"contactMobile",t)},expression:"userForm.contactMobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱",prop:"mail"}},[a("el-input",{attrs:{placeholder:"输入邮箱地址"},model:{value:e.userForm.enterpriseEmail,callback:function(t){e.$set(e.userForm,"enterpriseEmail",t)},expression:"userForm.enterpriseEmail"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"说明"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.userForm.description,callback:function(t){e.$set(e.userForm,"description",t)},expression:"userForm.description"}})],1),e._v(" "),a("el-form-item",[a("el-button",{staticClass:"saveBtn",attrs:{type:"primary"},on:{click:e.modifyBase}},[e._v("保存编辑")])],1)],1)],1)])],1),e._v(" "),a("div",{staticClass:"w-container"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("修改密码")])]),e._v(" "),a("div",{staticClass:"account-change-pass"},[a("el-form",{ref:"passForm",attrs:{model:e.passForm,rules:e.passRules,"label-width":"80px"}},[a("el-form-item",{attrs:{prop:"password",label:"原密码"}},[a("el-input",{attrs:{placeholder:"密码",type:e.passwordType},model:{value:e.passForm.password,callback:function(t){e.$set(e.passForm,"password",t)},expression:"passForm.password"}},[a("i",{staticClass:"el-input__icon el-icon-lx-attentionfill",class:e.passwordClass,attrs:{slot:"suffix"},on:{click:function(t){return e.showPassword("password")}},slot:"suffix"})])],1),e._v(" "),a("el-form-item",{attrs:{prop:"newPassword",label:"新密码"}},[a("el-input",{attrs:{placeholder:"密码",type:e.newPasswordType},model:{value:e.passForm.newPassword,callback:function(t){e.$set(e.passForm,"newPassword",t)},expression:"passForm.newPassword"}},[a("i",{staticClass:"el-input__icon el-icon-lx-attentionfill",class:e.newPasswordClass,attrs:{slot:"suffix"},on:{click:function(t){return e.showPassword("newPassword")}},slot:"suffix"})])],1),e._v(" "),a("el-form-item",{attrs:{prop:"checkPass",label:"确认密码"}},[a("el-input",{attrs:{placeholder:"密码",type:e.checkPassType},model:{value:e.passForm.checkPass,callback:function(t){e.$set(e.passForm,"checkPass",t)},expression:"passForm.checkPass"}},[a("i",{staticClass:"el-input__icon el-icon-lx-attentionfill",class:e.checkPassClass,attrs:{slot:"suffix"},on:{click:function(t){return e.showPassword("checkPass")}},slot:"suffix"})])],1),e._v(" "),a("el-form-item",[a("el-button",{staticClass:"saveBtn",attrs:{type:"primary"},on:{click:function(t){return e.saveChangePassBtn("passForm")}}},[e._v("保 存")])],1)],1)],1)])],1),e._v(" "),a("el-dialog",{staticClass:"authenticationDialog",attrs:{title:"企业认证申请",visible:e.authenticationVisible,width:"800px"},on:{"update:visible":function(t){e.authenticationVisible=t}}},[a("el-form",{ref:"authenticationForm",attrs:{rules:e.authenticationRules,model:e.authenticationForm,"label-width":"160px"}},[a("el-form-item",{attrs:{label:"企业中文全称",prop:"enterpriseName"}},[a("el-input",{attrs:{placeholder:"输入企业中文全称"},model:{value:e.authenticationForm.enterpriseName,callback:function(t){e.$set(e.authenticationForm,"enterpriseName",t)},expression:"authenticationForm.enterpriseName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"法人代表姓名",prop:"legalRepresentative"}},[a("el-input",{attrs:{placeholder:"输入企业法人代表中文姓名"},model:{value:e.authenticationForm.legalRepresentative,callback:function(t){e.$set(e.authenticationForm,"legalRepresentative",t)},expression:"authenticationForm.legalRepresentative"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"法人身份证号",prop:"legalRepresentativeCardNumber"}},[a("el-input",{attrs:{placeholder:"请输入法人的18位身份证号"},model:{value:e.authenticationForm.legalRepresentativeCardNumber,callback:function(t){e.$set(e.authenticationForm,"legalRepresentativeCardNumber",t)},expression:"authenticationForm.legalRepresentativeCardNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"法人身份证正面照",prop:"identityCardFrontPath"}},[a("el-upload",{attrs:{action:"","show-file-list":!1,"http-request":e.HttpCardFront}},[e.cardFrontImageUrl?a("img",{staticClass:"upload_img",attrs:{src:e.cardFrontImageUrl}}):a("i",{staticClass:"el-icon-plus uploader-icon"}),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("图片需清晰，支持最大5M的jpg,png,jpeg格式图片")])])],1),e._v(" "),a("el-form-item",{attrs:{label:"法人身份证反面照",prop:"identityCardBackPath"}},[a("el-upload",{attrs:{action:"","show-file-list":!1,"http-request":e.HttpCardBack}},[e.cardBackImageUrl?a("img",{staticClass:"upload_img",attrs:{src:e.cardBackImageUrl}}):a("i",{staticClass:"el-icon-plus uploader-icon"}),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("图片需清晰，支持最大5M的jpg,png,jpeg格式图片")])])],1),e._v(" "),a("el-form-item",{attrs:{label:"企业营业执照",prop:"name"}},[a("el-upload",{attrs:{action:"","show-file-list":!1,"http-request":e.HttpBusiness}},[e.businessImageUrl?a("img",{staticClass:"upload_img",attrs:{src:e.businessImageUrl}}):a("i",{staticClass:"el-icon-plus uploader-icon"}),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("图片需清晰，支持最大5M的jpg,png,jpeg格式图片")])])],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.authenticationVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleAuthentication("authenticationForm")}}},[e._v("提 交")])],1)],1)],1)},staticRenderFns:[]};var m=a("VU/8")(c,u,!1,function(e){a("VTud")},"data-v-4cf347f4",null);t.default=m.exports}});