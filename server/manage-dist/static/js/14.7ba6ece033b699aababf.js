webpackJsonp([14],{HQ33:function(e,t){},oxKA:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("mvHQ"),a=r.n(s),o=r("WfbR"),l={name:"auth",data:function(){return{phase:"",overruleVisible:!1,byVisible:!1,speechForm:{enterpriseName:""},checkboxList:["含有敏感词汇","含有非法字符","有语病","内容和话术节点不对应"],formOverrule:{type:[],desc:""},errors:{formOverruleType:"",formOverruleDesc:""},iframeSrc:"",showDesc:!1}},mounted:function(){document.documentElement.clientHeight},created:function(){var e=this;this.phase=this.$route.query.phase,this.speechcraftId=this.$route.params.id,this.queryMemberDetail(),this.$nextTick(function(){var t=baseHost+"/flow/index.html?viewType=0&m=2&speechcraftId="+e.speechcraftId+"&m=1&flowType=1";e.iframeSrc=t})},methods:{resetForm:function(){},onSubmit:function(){},changeCheckbox:function(e){e.length&&(this.errors.formOverruleDesc="")},changeInput:function(e){this.errors.formOverruleType=""},queryMemberDetail:function(){var e=this,t={speechcraftId:this.$route.params.id};$.get(this.$baseUrl+"services/speechcraft/querySpeechcraftDetail.json",$.param(t)).then(function(t){if("0000"==t.resultMessageEnum){var r=t.returnObject;r.speechcraftStatusTxt=o.a.formatterSpeechcraftStatus(r.speechcraftStatus),r.authenticationFlag=0==r.authenticationFlag?"未认证":"已认证",r.latestApproveRejectReason&&(r.latestApproveRejectReason=JSON.parse(r.latestApproveRejectReason).join(",")),e.speechForm=r}else e.$message.error(t.errorInfoList[0].errorMessage)})},approveSpeechcraftResult:function(e){var t=this,r=[];if(!e&&!this.formOverrule.type.length)return this.errors.formOverruleDesc="请勾选驳回原因！",!1;var s={id:this.$route.params.id,resultFlag:e};e||(r=r.concat(this.formOverrule.type),this.formOverrule.desc&&r.push(this.formOverrule.desc),s.rejectReason=a()(r)),$.post(this.$baseUrl+"services/speechcraft/approveSpeechcraftResult.json",a()(s)).then(function(e){"0000"==e.resultMessageEnum?(t.$message.success("操作成功！"),t.byVisible=!1,t.overruleVisible=!1,t.$router.push("/speech")):t.$message.error(e.errorInfoList[0].errorMessage)})},createExportTaskItemExcelFile:function(){},handleOverrule:function(){this.overruleVisible=!0}}},c={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{},[r("el-row",{staticClass:"back-btn-box"},[r("router-link",{attrs:{to:"/speech"}},[r("el-button",[e._v("返回")])],1)],1),e._v(" "),r("div",{staticClass:"admin-content"},[r("div",{staticClass:"w-box-card"},[r("div",{staticClass:"w-card__header"},[r("span",[e._v("话术信息")]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:2==e.speechForm.speechcraftStatus||4==e.speechForm.speechcraftStatus||7==e.speechForm.speechcraftStatus,expression:"\n            speechForm.speechcraftStatus == 2 ||\n              speechForm.speechcraftStatus == 4 ||\n              speechForm.speechcraftStatus == 7\n          "}],staticStyle:{float:"right","margin-top":"-6px"}},[r("el-button",{attrs:{type:"danger"},on:{click:function(t){e.overruleVisible=!0}}},[e._v("驳回")]),e._v(" "),r("el-button",{attrs:{type:"success"},on:{click:function(t){e.byVisible=!0}}},[e._v("通过")])],1)]),e._v(" "),r("div",{staticClass:"w-card__body"},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-form",{ref:"speechForm",attrs:{model:e.speechForm,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"话术名称："}},[e._v("\n                "+e._s(e.speechForm.speechcraftName)+"\n              ")]),e._v(" "),r("el-form-item",{attrs:{label:"所属行业："}},[e._v("\n                "+e._s(e.speechForm.industryName)+"\n              ")]),e._v(" "),r("el-form-item",{attrs:{label:"提交用户："}},[e._v("\n                "+e._s(e.speechForm.latestApplyName)+"\n              ")])],1)],1),e._v(" "),r("el-col",{attrs:{span:8}},[r("el-form",{ref:"speechForm",attrs:{model:e.speechForm,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"提交时间："}},[e._v("\n                "+e._s(e.speechForm.latestApplyTime)+"\n              ")]),e._v(" "),r("el-form-item",{attrs:{label:"提交人："}},[e._v("\n                "+e._s(e.speechForm.latestApplyName)+"\n              ")]),e._v(" "),r("el-form-item",{attrs:{label:"截止时间："}},[e._v("\n                "+e._s(e.speechForm.latestApproveEndTime)+"\n              ")])],1)],1),e._v(" "),r("el-col",{attrs:{span:8}},[r("el-form",{ref:"speechForm",attrs:{model:e.speechForm,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"审核时间："}},[e._v("\n                "+e._s(e.speechForm.latestApproveTime)+"\n              ")]),e._v(" "),r("el-form-item",{attrs:{label:"审核负责人："}},[e._v("\n                "+e._s(e.speechForm.latestApproveRoleName)+"\n              ")]),e._v(" "),r("el-form-item",{attrs:{label:"审核人："}},[e._v("\n                "+e._s(e.speechForm.latestApproveManagerName)+"\n              ")]),e._v(" "),r("el-form-item",{attrs:{label:"审核状态："}},[e._v("\n                "+e._s(e.speechForm.speechcraftStatusTxt)+"\n              ")]),e._v(" "),r("el-form-item",{attrs:{label:"审核结果："}},[e._v("\n                "+e._s(e.speechForm.speechcraftStatusTxt)+"\n              ")])],1)],1)],1)],1),e._v(" "),r("div",[r("iframe",{attrs:{width:"100%",height:"1000",src:e.iframeSrc,frameborder:"0"}})])])]),e._v(" "),r("el-dialog",{attrs:{title:"通过认证申请",visible:e.byVisible,width:"600px",center:""},on:{"update:visible":function(t){e.byVisible=t}}},[r("div",{staticClass:"overrule-dialog-cnt by-dialog"},[e._v("\n      您确认对话术审核无误，要对其申请予以通过吗？\n    ")]),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.byVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.approveSpeechcraftResult(!0)}}},[e._v("确认通过")])],1)]),e._v(" "),r("el-dialog",{attrs:{title:"驳回话术申请",visible:e.overruleVisible,width:"600px",center:""},on:{"update:visible":function(t){e.overruleVisible=t}}},[r("div",{staticClass:"overrule-dialog-cnt"},[r("el-form",{ref:"formOverruleForm",attrs:{model:e.formOverrule,"label-width":"90px"}},[r("el-form-item",{staticClass:"form-item-check",attrs:{label:"驳回原因：（可多选）",prop:"type",error:e.errors.formOverruleDesc}},[r("el-checkbox-group",{on:{change:e.changeCheckbox},model:{value:e.formOverrule.type,callback:function(t){e.$set(e.formOverrule,"type",t)},expression:"formOverrule.type"}},e._l(e.checkboxList,function(e,t){return r("el-checkbox",{key:t,attrs:{label:e,name:"type"}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"详细说明：",error:e.errors.formOverruleType,prop:"desc"}},[r("el-input",{attrs:{type:"textarea",placeholder:"必填，请注明有误的节点名称及原因"},on:{change:e.changeInput},model:{value:e.formOverrule.desc,callback:function(t){e.$set(e.formOverrule,"desc",t)},expression:"formOverrule.desc"}})],1)],1),e._v(" "),r("div")],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.overruleVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.approveSpeechcraftResult(!1)}}},[e._v("确认驳回")])],1)])],1)},staticRenderFns:[]};var i=r("VU/8")(l,c,!1,function(e){r("HQ33")},"data-v-e6f2c92c",null);t.default=i.exports}});