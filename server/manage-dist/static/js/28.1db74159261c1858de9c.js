webpackJsonp([28],{RgYE:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("mvHQ"),o=i.n(n),r=(i("DHmE"),{name:"dashboard",data:function(){return{id:"",queryKey:"",type:"3",fileName:"",industryId:"",multipleSelection:[],disabled:!0,intentTyData:[],sortList:[],cur_page:1,validIndustryListData:[],activeIndex:0,copyForm:{newSpeechcraftName:"",industryType:"",isCopySound:!1,soundConfigGroup:null},soundConfigGroup:[],copyFormRules:{newSpeechcraftName:[{required:!0,message:"话术名称不能为空！"}],industryType:[{required:!0,message:"请选择行业领域！"}],soundConfigGroup:[{required:!0,message:"选择“同时复制音频”选项时，音频存储文件夹不能为空！"}]},selectOpt:[],pagination:{show:!0,total:0,pageIndex:1,pageSize:20},copyVisible:!1,fullScreenLoading:null}},computed:{},created:function(){this.$route.params.id&&(this.id=this.$route.params.id),this.querySpeechcraftList(),this.queryValidIndustryList()},watch:{},methods:{handleBack:function(){this.$router.push("/speech?type=2")},onSearch:function(){this.activeIndex=0,this.industryId="",this.querySpeechcraftList()},searchChange:function(e){e||this.querySpeechcraftList()},handleSwitchItem:function(e,t){this.activeIndex=t,this.industryId=e.id,"all"==this.industryId&&(this.industryId=""),this.querySpeechcraftList()},handleChange:function(e){"string"==typeof e&&(this.soundConfigGroup.forEach(function(t,i){"duplicateid"===t.id&&(t.configGroupName=e)}),this.copyForm.soundConfigGroup={id:"duplicateid",configGroupName:e,soundConfigGroupType:1})},handleCopy:function(e,t){this.querySoundConfigGroupList(),this.copyVisible=!0,this.activeRow=e,this.copyForm.newSpeechcraftName=e.speechcraftName,this.copyForm.soundConfigGroup={id:"duplicateid",configGroupName:this.copyForm.newSpeechcraftName,soundConfigGroupType:1}},querySoundConfigGroupList:function(){var e=this;$.get(this.$baseUrl+"services/sound/querySoundConfigGroupList.json?duplicateFlag=1&soundConfigGroupType=1").then(function(t){"0000"==t.resultMessageEnum?(t.returnObject&&(e.soundConfigGroup=t.returnObject),e.soundConfigGroup.push({id:"duplicateid",configGroupName:e.copyForm.newSpeechcraftName,soundConfigGroupType:1})):e.$message.error(t.errorInfoList[0].errorMessage)})},sortChange:function(e){var t=!0;t="ascending"==e.order,this.sortList=[{propertyName:e.prop,ascendingFlag:t}],this.querySpeechcraftList()},handleView:function(e,t){var i=baseHost+"/flow/index.html?viewType=0&speechcraftId="+e.speechcraftId+"&flowType=1";window.open(i)},handleSelectionChange:function(e){this.multipleSelection=[],this.multipleSelection=e,this.multipleSelection.length?this.disabled=!1:this.disabled=!0},handleCurrentChange:function(e){this.cur_page=e,this.querySpeechcraftList()},handleEdit:function(e,t){this.$router.push("/speech/hy/"+e.id)},querySpeechcraftList:function(){var e=this,t={templateType:"2",memberId:this.id,currentPage:this.cur_page-1,pageSize:this.pagination.pageSize};this.industryId&&(t.industryTypeList=[],t.industryTypeList.push(this.industryId));var i=this.queryKey;i&&(t.queryKey=i),this.sortList.length&&(t.sortList=this.sortList),$.post(this.$baseUrl+"services/speechcraft/querySpeechcraftList.json",o()(t)).then(function(t){"0000"==t.resultMessageEnum?(e.pagination.total=t.returnObject.totalNumber,e.intentTyData=t.returnObject.recordList):e.$message.error(t.errorInfoList[0].errorMessage)})},queryValidIndustryList:function(){var e=this;$.get(this.$baseUrl+"services/intention/queryValidIndustryList.json").then(function(t){if("0000"==t.resultMessageEnum){var i=JSON.parse(o()(t.returnObject));e.selectOpt=t.returnObject,i.unshift({id:"all",industryName:"全部"}),e.validIndustryListData=i}})},copySpeechcraft:function(){var e,t=this;e=this.validIndustryListData.find(function(e){return e.id===t.copyForm.industryType}),this.$refs.copyForm.validate(function(i){if(i){var n={newTemplateType:"1",industryType:e.id,industryName:e.industryName,speechcraftId:t.activeRow.speechcraftId,newSpeechcraftName:t.copyForm.newSpeechcraftName,copyOperationType:"2",isCopySound:t.copyForm.isCopySound,soundConfigGroup:t.copyForm.soundConfigGroup};$.post(t.$baseUrl+"services/speechcraft/copySpeechcraft.json",o()(n)).then(function(e){"0000"==e.resultMessageEnum?(t.copyForm.isCopySound?t.$message({type:"success",dangerouslyUseHTMLString:!0,message:t.copyForm.soundConfigGroup.configGroupName+'音频复制成功，<a target="_blank" href="'+t.$baseHost+'/#/resource">点击查看</a>'}):t.$message.success("复制成功！"),t.copyVisible=!1):t.$message.error(e.errorInfoList[0].errorMessage)})}})},openFullScreenLoading:function(e){this.fullScreenLoading=this.$loading({lock:!0,text:e+"...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"})}},destroyed:function(){}}),s={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container-admin"},[i("div",{staticClass:"admin-page"},[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",[e._v("管理中心")]),e._v(" "),i("el-breadcrumb-item",[e._v("话术管理")]),e._v(" "),i("el-breadcrumb-item",[e._v("话术库管理")]),e._v(" "),i("el-breadcrumb-item",[e._v("用户话术库")]),e._v(" "),i("el-breadcrumb-item",[e._v("查看用户话术")])],1),e._v(" "),i("el-button",{staticClass:"back-btn",on:{click:e.handleBack}},[e._v("返回")])],1),e._v(" "),i("div",{staticClass:"admin-body"},[i("div",{staticClass:"speech-tab-pane"},[i("div",[i("el-row",[i("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[i("el-form-item",{attrs:{label:"关键词:"}},[i("el-input",{attrs:{placeholder:"话术名称"},on:{change:e.searchChange},model:{value:e.queryKey,callback:function(t){e.queryKey=t},expression:"queryKey"}})],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[e._v("搜索")])],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{"padding-bottom":"20px"}}),e._v(" "),i("el-row",[i("el-col",{staticClass:"validIndustryList",attrs:{span:4}},[i("span",{staticClass:"title"},[e._v("行业领域")]),e._v(" "),i("ul",{staticClass:"validIndustryList-ul"},e._l(e.validIndustryListData,function(t,n){return i("li",{key:t.id,staticClass:"validIndustryList-li",class:{active:e.activeIndex==n},on:{click:function(i){return e.handleSwitchItem(t,n)}}},[e._v("\n                "+e._s(t.industryName)+"\n              ")])}),0)]),e._v(" "),i("el-col",{attrs:{span:20}},[i("el-table",{staticStyle:{width:"100%","border-left":"1px solid #ebeef5"},attrs:{data:e.intentTyData},on:{"sort-change":e.sortChange,"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{prop:"speechcraftName",label:"话术名称"}}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"createTime",width:"180",label:"更新时间"}}),e._v(" "),i("el-table-column",{attrs:{width:"100",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticClass:"operation-box"},[i("el-button",{attrs:{type:"text"},on:{click:function(i){return e.handleView(t.row,t.$index)}}},[e._v("查看")]),e._v(" "),i("span",[e._v("｜")]),e._v(" "),i("el-button",{attrs:{type:"text"},on:{click:function(i){return e.handleCopy(t.row,t.$index)}}},[e._v("复制")])],1)]}}])})],1)],1)],1),e._v(" "),i("div",{staticClass:"pagination"},[i("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next,jumper",total:e.pagination.total,"page-size":e.pagination.pageSize},on:{"current-change":e.handleCurrentChange}})],1)],1)])]),e._v(" "),i("el-dialog",{attrs:{title:"复制到通用话术库",visible:e.copyVisible,width:"400px"},on:{"update:visible":function(t){e.copyVisible=t}}},[i("el-form",{ref:"copyForm",staticClass:"copyForm",attrs:{rules:e.copyFormRules,model:e.copyForm,"label-width":"100px"},on:{va:function(e){}}},[i("el-form-item",{attrs:{label:"话术名称：",prop:"newSpeechcraftName"}},[i("el-input",{attrs:{placeholder:"请输入话术名称"},on:{change:e.handleChange},model:{value:e.copyForm.newSpeechcraftName,callback:function(t){e.$set(e.copyForm,"newSpeechcraftName",t)},expression:"copyForm.newSpeechcraftName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"行业领域：",prop:"industryType"}},[i("el-select",{attrs:{placeholder:"请选择行业"},model:{value:e.copyForm.industryType,callback:function(t){e.$set(e.copyForm,"industryType",t)},expression:"copyForm.industryType"}},e._l(e.validIndustryListData,function(e){return i("el-option",{key:e.id,attrs:{label:e.industryName,value:e.id}})}),1)],1),e._v(" "),i("el-form-item",[i("el-checkbox",{staticClass:"copySpeechRead",model:{value:e.copyForm.isCopySound,callback:function(t){e.$set(e.copyForm,"isCopySound",t)},expression:"copyForm.isCopySound"}},[e._v("同时复制音频")]),e._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"light","popper-class":"speech-tip",placement:"right-start"}},[i("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n            该话术模版关联的音频也会自"),i("br"),e._v("动复制到【通用音频库】中的"),i("br"),e._v("【话术音频】文件夹下\n          ")]),e._v(" "),i("i",{staticClass:"el-icon-question"})])],1),e._v(" "),e.copyForm.isCopySound?i("el-form-item",{attrs:{prop:"soundConfigGroup"}},[i("el-select",{attrs:{"default-first-option":"",filterable:"","allow-create":"","value-key":"id",placeholder:"选择音频存储文件夹"},on:{change:e.handleChange},model:{value:e.copyForm.soundConfigGroup,callback:function(t){e.$set(e.copyForm,"soundConfigGroup",t)},expression:"copyForm.soundConfigGroup"}},e._l(e.soundConfigGroup,function(e){return i("el-option",{key:e.id,attrs:{label:e.configGroupName,value:e}})}),1)],1):e._e()],1),e._v(" "),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.copyVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.copySpeechcraft()}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var a=i("VU/8")(r,s,!1,function(e){i("xXCV")},"data-v-2364cff8",null);t.default=a.exports},xXCV:function(e,t){}});